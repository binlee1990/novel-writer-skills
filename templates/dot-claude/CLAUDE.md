# 小说创作核心原则

> 本文件由 novelws init 生成，包含所有 Slash Command 共享的核心写作规范。
> 修改此文件会影响所有命令的行为。

## 反 AI 写作核心

- **段落结构**：单句成段比例 30%-50%，每段 50-100 字
- **句式**：短句优先（15-25 字），白话替代文绉绉
- **描写**：删除装饰性形容词，一个准确细节胜过三个堆砌
- **禁止**：「然而」「殊不知」「缓缓」「深邃」「仿佛...一般」等 AI 高频词
- **完整规范**：`.specify/templates/knowledge-base/requirements/anti-ai-v4.md`

## 段落格式规范

- ⛔ 禁止使用"一"、"二"、"三"等数字标记分段
- ✅ 场景转换用两个空行（一个空白行）分隔
- 📖 原因：数字标记破坏阅读沉浸感

## 后置 Tracking 处理

- `/write` 完成后**自动**更新 4 个 tracking 文件（character-state, relationships, plot-tracker, timeline）
- `/analyze` 完成后**询问用户确认**后更新 tracking 文件
- 格式详情：`.claude/skills/auto-tracking/SKILL.md`

## 会话级资源复用

本次对话中已加载的资源知识应复用，避免重复读取文件：

1. **首次加载**：读取资源文件内容，记住已加载的资源列表
2. **后续命令**：检查资源是否在"已加载列表"中
   - ✅ 已加载：直接使用已有知识，不重新读取文件
   - ❌ 未加载：读取文件并添加到"已加载列表"
3. **例外**：用户明确要求"重新加载"时重新读取

## 前文内容加载策略

写作下一章时的前文加载规则：
1. 读取上一章的完整文件
2. 如果 > 1500 字，只保留最后 1000 字（覆盖最后 1-2 个场景）
3. 如果 ≤ 1500 字，保留全部内容
4. 额外读取上一章的标题和开篇第一段

**补充上下文来源**（不依赖前文全文）：
- `creative-plan.md`：章节大纲和情节走向
- `tasks.md`：当前章节具体写作任务
- `spec/tracking/*.json`：角色状态、关系、情节线、时间线

## /compact 使用建议

每写完 2-3 章后，建议执行 `/compact` 压缩对话历史：
- compact 会保留：已加载资源列表、最近章节要点、角色状态概要
- compact 会清除：完整的旧章节文本、工具调用详细日志
- 原因：tracking 系统已捕获关键信息，不依赖对话历史
