---
name: adaptive-style-learning
description: "Use when user has written 3+ chapters - automatically analyzes writing style and generates personalized style guide to improve AI consistency"
allowed-tools: Read, Write
---

# 自适应风格学习 (Adaptive Style Learning)

## 快速参考（Quick Reference）

### 何时使用
- 用户已写 3+ 章（最少分析样本）
- 首次生成风格指南
- 风格发生变化需要更新
- AI 续写风格不一致时

### 自动激活时机
- 执行 `/write` 前检测到 personal-voice.md 不存在
- 用户说"分析我的风格""学习我的写法"
- 检测到已写章节 ≥ 3 章

## 核心原则 (Core Principles)

### 1. 基于实际写作而非主观描述

**传统方式（主观）**：
```
用户："我的风格是……简洁有力，富有节奏感"
AI："好的，我会模仿"
→ 实际不知道怎么模仿
```

**风格学习方式（客观）**：
```
分析用户 10 章内容 →
发现：
- 平均句长 16 字（短句为主）
- 对话占比 65%（对话驱动）
- 形容词密度 4%（少修饰）
- 单句段比例 45%（视觉节奏快）

→ 生成具体指导：
"续写时保持短句为主（15-20字/句），对话占 60% 以上，
少用形容词，多用单句段"
```

### 2. 量化 + 定性相结合

**量化指标**：
- 可测量、可重复
- 客观、精确

**定性描述**：
- 风格印象
- 整体感受
- 独特特征

**两者结合**：
```markdown
## 量化特征
- 平均句长：16.3 字
- 对话占比：65.2%
- 形容词密度：4.1%

## 定性风格
- 整体：快节奏、口语化、对话驱动
- 句式：以短句为主，偶尔长句用于环境描写
- 用词：简洁克制，少修饰，多动词
```

### 3. 提供具体的续写指导

不只是"描述风格"，而是"如何模仿风格"。

```markdown
## 续写指导

### 句子层面
✓ 保持 15-20 字/句（平均 16 字）
✓ 60% 以上用短句（<15 字）
✓ 避免超过 40 字的复杂长句

### 段落层面
✓ 平均段长 60-80 字
✓ 40% 左右用单句段（制造节奏）
✓ 对话独立成段

### 词汇层面
✓ 形容词控制在 5% 以内
✓ 多用动词，少用形容词副词
✓ 避免："非常""十分""极其"等强调副词

### 对话层面
✓ 对话占 60-70%
✓ 对话简短、有节奏
✓ 少用对话标签（"他说""她说"）

### 节奏层面
✓ 每章 3-4 个小场景
✓ 场景转换干脆，少过渡
✓ 快进为主，少拖沓
```

## 实践应用 (Best Practices)

### 执行流程

**Step 1: 检测可用章节**
```
读取 stories/[current]/content/
检查章节数量：
- < 3 章：样本不足，建议再写几章
- 3-10 章：可以分析，但结果可能不稳定
- > 10 章：理想，结果可靠
```

**Step 2: 读取章节内容**
```
读取最近 10 章（或全部，如果 < 10 章）
跳过：
- 大纲文件
- 未完成草稿
```

**Step 3: 分析风格特征**
```
按照分析算法提取特征：
- 句子层面：平均句长、句长分布
- 词汇层面：形容词密度、高频词
- 段落层面：平均段长、单句段比例
- 对话层面：对话占比
- 节奏层面：场景频率
```

**Step 4: 生成风格报告**
```
输出到控制台：
📊 风格分析报告
├── 句子特征：平均 16.3 字，短句占 62%
├── 词汇特征：形容词 4.1%，高频词 "他""说""了"
├── 对话占比：65.2%
└── 风格印象：快节奏、对话驱动、口语化

💡 建议：
- 保持短句为主
- 对话占 60% 以上
- 少用修饰词
```

**Step 5: 写入 personal-voice.md**
```
生成完整的风格指南文件
保存到：.specify/memory/personal-voice.md
```

**Step 6: 确认和调整**
```
询问用户：
"已生成风格指南，请查看 .specify/memory/personal-voice.md
是否需要调整？"

用户可以手动微调：
- 删除不准确的描述
- 添加未捕获的特征
- 强调某些风格要点
```

### 与其他命令的集成

**在 /write 前自动检查**：
```
pre-write-checklist 检测：
- personal-voice.md 是否存在？
- 如果不存在且已写 3+ 章 →
  建议："执行风格学习生成风格指南"
```

**定期更新**：
```
每写 10 章后提醒：
"已写 10 章，建议更新风格指南以反映风格变化"
```

## 生成的 personal-voice.md 格式

```markdown
# 个人写作风格指南

> 本文件由风格学习 Skill 自动生成，基于已写章节分析
> 生成日期：2025-02-07
> 分析章节：第 1-10 章（共 25,000 字）

---

## 📊 量化风格特征

### 句子层面
- **平均句长**：16.3 字
- **句长分布**：
  - 短句（<15字）：62%
  - 中句（15-30字）：32%
  - 长句（>30字）：6%
- **句长标准差**：8.2（中等变化）

### 词汇层面
- **形容词密度**：4.1%（低）
- **副词密度**：2.8%（低）
- **对话标签频率**：30%（较少使用"他说""她说"）
- **高频词 Top 10**：他(1200次)、说(890次)、了(850次)...

### 段落层面
- **平均段长**：68.5 字
- **单句段比例**：43%（高，制造节奏感）
- **段落类型分布**：
  - 对话段：55%
  - 叙述段：30%
  - 描写段：15%

### 叙述层面
- **对话占比**：65.2%（对话驱动）
- **内心独白**：8.3%（少）
- **环境描写**：12.5%（适中）
- **动作描写**：14.0%（较多）

---

## 🎨 定性风格印象

### 整体风格
快节奏、口语化、对话驱动的现代都市风格

### 句式特点
- **以短句为主**：制造紧凑感和节奏感
- **长短交替**：偶尔用长句缓冲节奏
- **多用主动句**：直接、有力

### 用词倾向
- **简洁克制**：少用形容词副词
- **口语化**：接地气，少书面语
- **动词驱动**：多用动作，少用状态

### 对话风格
- **对话密集**：占 60% 以上
- **简短有力**：对话多为短句
- **少标签**：靠节奏和上下文区分说话人

### 段落节奏
- **短段为主**：60-80 字/段
- **大量单句段**：制造视觉节奏
- **白空间多**：页面呼吸感强

---

## ✍️ 续写指导（重点）

### 句子层面指导

**目标**：平均句长 15-20 字

✓ **好的示例**（符合你的风格）：
```
他转身离开。
她没有追。
外面下起了雨，淅淅沥沥的。
```

✗ **避免的示例**（不符合你的风格）：
```
他转过身去，毫不犹豫地向门口走去，头也不回一下，
仿佛她从来不曾存在过一样。
（单句 30+ 字，太长）
```

### 段落层面指导

**目标**：60-80 字/段，40% 单句段

✓ **好的示例**：
```
他转身离开。

她没有追。

窗外下起了雨，淅淅沥沥的。她盯着那扇门，
手里的咖啡早就凉了。
```
（短段 + 单句段 + 节奏）

✗ **避免的示例**：
```
他转身离开了，她没有追，只是站在原地，
看着他的背影消失在门口，窗外下起了雨，
淅淅沥沥的，她盯着那扇门，手里的咖啡早就凉了。
```
（一整段，无节奏）

### 对话层面指导

**目标**：对话占 60-70%，简短直接

✓ **好的示例**：
```
"你走吧。"
他停下。
"真的？"
"嗯。"
"好。"
他走了。
```
（对话驱动，简短，少标签）

✗ **避免的示例**：
```
她对他说："你走吧，我不想再看到你了。"
他停下脚步，转过头来问道："你真的要这样吗？"
她点点头说："嗯，我是认真的。"
他叹了口气说："好吧，那我走了。"
```
（标签过多，对话太完整）

### 词汇层面指导

**目标**：形容词 < 5%，多用动词

✓ **好的用词**：
- 动词：走、跑、停、看、说、笑
- 简洁：雨、风、门、手
- 少修饰：直接描述行为

✗ **避免的用词**：
- 过度修饰："非常""十分""极其""特别"
- 华丽形容词："绚丽的""华美的""璀璨的"
- 书面语："然而""因此""故而"

### 节奏层面指导

**目标**：快节奏，每章 3-4 个场景

✓ **节奏控制**：
- 场景转换干脆：少过渡，直接跳
- 时间快进：跳过无聊部分
- 对话推进：用对话而非叙述推进情节

---

## 🔄 风格更新记录

| 日期 | 章节范围 | 主要变化 |
|------|---------|---------|
| 2025-02-07 | 1-10 章 | 初始分析 |

---

## 📝 手动调整区（可选）

用户可以在此添加自动分析未捕获的风格特征：

```
[用户手动添加的风格要点]
- 例如：喜欢用"淡淡的""微微"等柔和词汇
- 例如：避免使用"突然"，用行为暗示突然性
```

---

**使用建议**：
每次执行 /write 前，先快速扫描本文件，刷新风格记忆。
```

## 常见陷阱 (Common Pitfalls)

### 1. 样本不足导致不准确

**症状**：
- 只分析 1-2 章
- 风格特征不稳定

**解决**：
- 最少 3 章
- 建议 10+ 章

### 2. 过度依赖量化指标

**症状**：
- 只看数字，不看感觉
- 机械地复制特征

**解决**：
- 量化 + 定性结合
- 保留灵活性

### 3. 风格指南过时

**症状**：
- 最初 10 章生成的指南
- 但现在已写到 50 章，风格变化

**解决**：
- 定期更新（每 10 章）
- 检测风格漂移

## 检查清单 (Checklist)

执行风格学习前：
- [ ] 已写章节 ≥ 3 章？
- [ ] 章节内容完整（非草稿）？
- [ ] personal-voice.md 不存在或需要更新？

执行后验证：
- [ ] personal-voice.md 已生成？
- [ ] 量化指标合理？
- [ ] 续写指导清晰可执行？
- [ ] 用户确认风格描述准确？

## 进阶功能（可选）

### 风格漂移检测
```
每写 5 章，重新分析风格：
- 对比新风格 vs 旧风格
- 如果差异 > 20% →
  提醒："检测到风格变化，建议更新风格指南"
```

### 多人协作风格融合
```
如果多人合著：
- 分别分析每人风格
- 提取共同特征
- 生成统一风格指南
```

---

**核心价值**：
让 AI 真正理解用户风格，而非依赖模糊的"学我的风格"指令。
