---
name: style-detector
description: "探测用户的写作风格需求并加载对应指南。当用户提到口语化、生活化、真实感、文学性、严肃文学、纯文学、网文、爽文、快节奏、古风、武侠、古韵、极简、海明威、克制等关键词时自动激活。适用于讨论小说风格、写作文风、创作方向时使用。"
allowed-tools: Read, Edit
---

# 写作风格探测器

## 核心功能

自动探测用户的写作风格需求，并无缝加载对应的风格知识库。

## 可探测的风格

### 1. natural-voice（自然人声风格）
- **适合**：都市现代小说、现实题材、情感类小说
- **特点**：口语化、生活化、真实感强
- **触发词**：口语化、真实感、接地气、像说话一样

### 2. literary（文学风格）
- **适合**：严肃文学作品、历史小说、需要思想深度的故事
- **特点**：优美、深刻、有文学性、注重意境
- **触发词**：文学性、严肃文学、纯文学、有深度

### 3. web-novel（网文风格）
- **适合**：玄幻小说、都市爽文、系统流、重生流
- **特点**：节奏快、冲突密集、爽点频繁
- **触发词**：网文、爽文、打脸、装逼、升级流

### 4. ancient-style（古风）
- **适合**：武侠小说、仙侠、古代背景小说
- **特点**：有古韵但不纯文言、意象丰富、诗意化
- **触发词**：古风、古韵、武侠风、江湖味

### 5. minimal（极简风格）
- **适合**：悬疑推理、冷硬派小说、实验性作品
- **特点**：高度简洁、海明威式克制、留白艺术
- **触发词**：极简、海明威、克制、冷硬

详细关键词列表和触发场景请参阅 [KEYWORDS.md](KEYWORDS.md)。

---

## 激活后的工作流程

### 步骤 1：确认风格选择

当探测到关键词后，首先确认用户意图：

```
我注意到你提到了【口语化】，这通常对应 natural-voice 风格。

我可以：
1. 📖 展示这个风格的详细指南
2. ✅ 直接应用这个风格到你的项目
3. 🔍 看看其他风格选项

你想要哪一个？
```

### 步骤 2：加载风格知识库

如果用户确认，使用 Read 工具读取对应的知识库文件：

```
📖 读取：.claude/knowledge-base/styles/{style-name}.md
```

然后展示核心要点，完整规范已加载到上下文中。

### 步骤 3：写入配置标记

使用 Edit 工具在用户的 `specification.md` 中添加配置：

```yaml
---
writing-style: natural-voice
---
```

提示用户配置已保存，在执行 /write 时会自动遵守该风格规范。

---

## 多风格处理

当探测到多个风格关键词时，进行兼容性检测：

- **兼容组合**：提供混合方案和比例建议
- **冲突组合**：提示矛盾并给出解决方案

详细的冲突处理逻辑请参阅 [CONFLICT_RESOLUTION.md](CONFLICT_RESOLUTION.md)。

---

## 主动建议

- **基于故事类型建议风格**：分析 specification 中的故事类型，主动推荐适合的风格
- **中途调整支持**：持续监控用户反馈，支持风格调整

---

## 与 requirement-detector 的配合

本 Skill 专注于文风层面，与 requirement-detector（规范层）协同工作：

```
style-detector → 识别文风 → 加载 styles/*.md
requirement-detector → 识别规范 → 加载 requirements/*.md

最终组合效果示例：
natural-voice (风格) + anti-ai-v4 + fast-paced (规范)
= 自然人声的快节奏爽文，强力去AI味
```

---

## 使用示例

完整的对话示例和成功案例请参阅 [EXAMPLES.md](EXAMPLES.md)。

---

---

## 扩展能力

### 扩展 1：风格基线建立

**从已写章节中提取风格基线**，作为后续一致性检测的参照。

#### 基线提取维度

| 维度 | 指标 | 提取方法 |
|------|------|---------|
| 句式 | 平均句长、长短句比例、句式多样性 | 统计分析 |
| 词汇 | 常用词频、词汇丰富度、专业术语密度 | 词频统计 |
| 修辞 | 比喻/拟人/排比等修辞手法的使用频率 | 模式识别 |
| 叙述 | 叙述/对话/描写/动作的比例 | 段落分类统计 |
| 节奏 | 段落长度分布、场景切换频率 | 结构分析 |
| 视角 | 叙述人称、视角距离（远/近/内心） | 文本分析 |

#### 基线建立流程

1. 选取「代表性章节」（默认前 5 章，或用户指定）
2. 对每个维度提取数值
3. 计算均值和标准差
4. 生成风格基线报告

#### 基线报告格式

```
📊 风格基线报告
━━━━━━━━━━━━━━━━━━━━
基线来源：第 1-5 章

句式特征：
  平均句长：18 字/句
  长句（>30字）占比：15%
  短句（<10字）占比：25%
  句式多样性：7/10

词汇特征：
  词汇丰富度：6/10
  口语化程度：中高
  专业术语密度：低

叙述构成：
  对话：35%  ████████░░
  描写：25%  ██████░░░░
  叙述：20%  █████░░░░░
  动作：20%  █████░░░░░

修辞频率：
  比喻：每千字 1.2 次
  排比：每千字 0.3 次
  其他：每千字 0.5 次

节奏特征：
  平均段落长度：120 字
  场景切换频率：每章 4-6 次
```

### 扩展 2：风格偏移检测

**将新章节与风格基线对比，检测偏移**：

#### 偏移检测规则

| 偏移程度 | 判定标准 | 级别 |
|---------|---------|------|
| 正常波动 | 在基线 ±1 标准差内 | ✅ |
| 轻微偏移 | 在基线 ±1-2 标准差 | ⚠️ 提示 |
| 显著偏移 | 超出基线 ±2 标准差 | 🔴 警告 |

#### 偏移报告格式

```
📊 风格偏移检测 — 第 [N] 章
━━━━━━━━━━━━━━━━━━━━

| 维度 | 基线值 | 本章值 | 偏移 | 状态 |
|------|--------|--------|------|------|
| 平均句长 | 18字 | 22字 | +22% | ⚠️ 偏长 |
| 对话占比 | 35% | 50% | +43% | 🔴 偏高 |
| 描写占比 | 25% | 10% | -60% | 🔴 偏低 |
| 比喻频率 | 1.2/千字 | 1.0/千字 | -17% | ✅ 正常 |
| 段落长度 | 120字 | 130字 | +8% | ✅ 正常 |

🔴 显著偏移：
- 对话占比从 35% 升至 50%，描写占比从 25% 降至 10%
  可能原因：本章为纯对话场景
  建议：如非刻意为之，增加环境描写和动作描写

⚠️ 轻微偏移：
- 平均句长偏长，可能影响阅读节奏
  建议：适当拆分长句
```

### 扩展 3：跨章节风格一致性评分

**对多章节进行整体风格一致性评估**：

#### 评分维度

```
📊 风格一致性评分（第 1-[N] 章）
━━━━━━━━━━━━━━━━━━━━

句式一致性：████████░░ 8/10
词汇一致性：███████░░░ 7/10
叙述构成  ：██████░░░░ 6/10 ⚠️
修辞风格  ：████████░░ 8/10
节奏一致性：█████████░ 9/10

综合评分：7.6/10

📈 趋势：
第 1-10 章：稳定（基线建立期）
第 11-15 章：轻微偏移（对话增多）
第 16-20 章：回归基线
第 21-25 章：⚠️ 显著偏移（描写风格变化）

💡 建议：
- 第 21-25 章的描写风格与前期不同，检查是否为刻意变化
- 如非刻意，参考第 1-10 章的描写风格进行调整
```

### 与 /analyze --focus=style 的协作

风格基线和偏移检测能力增强了 `/analyze --focus=style` 的分析深度：

```
/analyze --focus=style 触发时：
1. 检查是否存在风格基线 → 如不存在，先建立基线
2. 对目标章节执行偏移检测
3. 生成跨章节一致性评分
4. 综合 style-reference.md（如存在）的对标分析
```


**Skill 版本**：v2.0
**最后更新**：2026-02-11
**兼容版本**：novel-writer-skills v1.0.5+
