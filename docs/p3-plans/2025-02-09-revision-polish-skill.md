# 修改润色 Skill 实现计划

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**目标：** 创建系统性的初稿修改润色 Skill，提供从结构到文字的多层次修改流程

**架构：** Agent Skill + 命令集成，读取已写章节，按层次逐步修改

**技术栈：** Markdown Skill 文件，与 /analyze、style-learning 互补

---

## 背景与动机

### 核心问题

**场景 1：初稿写完不知道怎么改**
```
用户写完 30 章初稿：
- 知道"需要修改"，但不知道从哪开始
- 随机修改，东改一点西改一点
- 没有系统性的修改流程
- 改完感觉还是差不多
```

**场景 2：/analyze 发现问题但不知道怎么修**
```
/analyze 报告：
- "节奏偏慢"
- "对话标签过多"
- "第 12 章与第 5 章有矛盾"

用户："好的，然后呢？具体怎么改？"
→ /analyze 只诊断，不治疗
```

**场景 3：修改缺乏层次感**
```
用户同时关注：
- 结构问题（章节顺序、情节逻辑）
- 节奏问题（拖沓、过快）
- 文字问题（用词、句式）
- 一致性问题（角色、时间线）

→ 混在一起改，效率极低
→ 改了文字才发现结构要大改，白费功夫
```

**场景 4：不知道什么时候该停止修改**
```
用户陷入无限修改循环：
- 改了第一遍，觉得还不够好
- 改了第二遍，又发现新问题
- 改了第三遍，把之前改好的又改回去了
→ 没有明确的"修改完成"标准
```

### 与现有功能的关系

| 功能 | 定位 | 修改润色的互补 |
|------|------|--------------|
| `/analyze` | **诊断** - 发现问题 | **治疗** - 解决问题 |
| `style-learning` | **提取** - 学习风格 | **应用** - 按风格修改 |
| `consistency-checker` | **检测** - 发现不一致 | **修复** - 修正不一致 |
| `pacing-control` | **理论** - 节奏知识 | **实践** - 调整节奏 |
| `/write` | **创作** - 写初稿 | **打磨** - 改初稿 |

### 价值主张

1. **系统化** - 从宏观到微观的分层修改流程
2. **可操作** - 不只是"发现问题"，而是"具体怎么改"
3. **有终点** - 明确的修改完成标准，避免无限循环
4. **保风格** - 修改时保持用户个人风格（读取 personal-voice.md）
5. **全覆盖** - 结构、节奏、文字、一致性四个层次全覆盖

---

## Task 1: 设计修改润色的分层流程

**Files:**
- Read: `templates/commands/analyze.md`（了解诊断输出格式）
- Read: `templates/skills/writing-techniques/pacing-control/SKILL.md`
- Read: `templates/skills/quality-assurance/consistency-checker/SKILL.md`

**Step 1: 定义四层修改模型**

### 修改四层模型（从宏观到微观）

```
第一层：结构修改（Structural Revision）
  ↓ 确认结构无问题后
第二层：节奏修改（Pacing Revision）
  ↓ 确认节奏无问题后
第三层：一致性修改（Consistency Revision）
  ↓ 确认一致性无问题后
第四层：文字润色（Line Editing）
```

**为什么必须按顺序？**
- 如果结构要大改（删章、合并、重排），文字润色就白做了
- 如果节奏要调整（删减拖沓段落），一致性检查的范围会变
- 先解决大问题，再处理小问题

### 第一层：结构修改

**检查项：**
- 章节顺序是否合理？是否需要重排？
- 是否有多余章节需要删除或合并？
- 是否有缺失的关键场景需要补写？
- 主线/支线比例是否合理？
- 高潮点位置是否正确（通常在 70-80% 处）？
- 开头是否足够吸引人？结尾是否令人满意？

**输出格式：**
```
结构审查报告

整体结构：三幕式 / 英雄之旅 / 自由结构
章节总数：30 章
总字数：256,000 字

结构问题：
  [严重] 第 8-12 章节奏停滞，建议合并为 3 章
  [建议] 第 1 章开头 2000 字可删减，直接从冲突开始
  [建议] 高潮在第 20 章（67%），建议后移到第 23 章（77%）

操作建议：
  1. 合并第 9、10 章为一章
  2. 删除第 11 章（与主线无关的支线）
  3. 第 1 章开头改为 in medias res（从中间开始）
```

### 第二层：节奏修改

**检查项：**
- 是否有连续多章节奏相同（如连续 5 章都是对话）？
- 紧张/舒缓是否交替？
- 是否有明显拖沓的段落？
- 场景转换是否流畅？
- 章节结尾是否有钩子（hook）？

**输出格式：**
```
节奏审查报告

整体节奏曲线：
  第 1-5 章：▓▓▓░░ 中等（铺垫）
  第 6-10 章：▓▓▓▓░ 较快（冲突升级）
  第 11-15 章：▓░░░░ 过慢 ⚠️
  第 16-20 章：▓▓▓▓▓ 高潮
  第 21-25 章：▓▓▓░░ 中等（收尾）

节奏问题：
  [严重] 第 11-15 章连续 5 章节奏过慢
  [警告] 第 7 章结尾缺少钩子，读者可能弃书
  [建议] 第 18 章（高潮）后缺少喘息，建议插入一个安静场景

操作建议：
  1. 第 11-15 章：删减描写段落，增加冲突事件
  2. 第 7 章结尾：添加悬念或反转
  3. 第 18-19 章之间：插入角色反思的安静场景
```

### 第三层：一致性修改

**检查项：**
- 角色性格是否前后一致？
- 时间线是否有矛盾？
- 世界观设定是否自洽？
- 伏笔是否都有回收？
- 角色称呼/外貌描述是否一致？

**输出格式：**
```
一致性审查报告

角色一致性：
  [矛盾] 李明第 3 章"沉默寡言"，第 8 章突然"滔滔不绝"（无转变铺垫）
  [矛盾] 苏婉儿第 5 章"黑色长发"，第 15 章"棕色短发"（未交代剪发）

时间线一致性：
  [矛盾] 第 10 章"三天后"与第 11 章"第二天"时间冲突

伏笔回收：
  [未回收] 第 3 章提到的"神秘信件"，后续未再出现
  [已回收] 第 5 章的"断剑"在第 20 章回收 ✓

操作建议：
  1. 第 6-7 章添加李明性格转变的铺垫场景
  2. 第 12 章添加苏婉儿剪发的描写
  3. 修正第 10-11 章的时间线
  4. 在第 18 章前回收"神秘信件"伏笔
```

### 第四层：文字润色

**检查项：**
- 是否有重复用词（同一段出现 3 次"突然"）？
- 是否有冗余表达（"他心里想着"→ 直接写想法）？
- 对话标签是否过多（"他说""她说"）？
- 是否有 AI 痕迹词汇（参考 anti-ai 要求）？
- 句式是否单调（连续 10 个"他……"开头）？
- 是否符合 personal-voice.md 的风格指南？

**输出格式：**
```
文字润色报告

高频问题：
  [重复] "突然"出现 47 次（建议控制在 10 次以内）
  [重复] "不由得"出现 23 次
  [冗余] "他心里暗暗想道"类表达 15 处
  [AI痕迹] "不禁""竟然""居然"过度使用

逐章润色建议：
  第 1 章：
    - 第 3 段："他突然站起来" → "他猛地站起来"
    - 第 7 段：连续 3 句"他……"开头，建议变换句式
    - 第 12 段：对话标签过多，删除 4 处"他说"

  第 2 章：
    ...
```

**Step 2: 定义修改完成标准**

```
修改完成检查清单：

结构层：
  □ 无多余章节
  □ 无缺失关键场景
  □ 高潮位置合理
  □ 开头吸引人，结尾令人满意

节奏层：
  □ 无连续 3 章以上节奏停滞
  □ 紧张/舒缓交替合理
  □ 每章结尾有钩子
  □ 无明显拖沓段落

一致性层：
  □ 角色性格前后一致（或有合理转变）
  □ 时间线无矛盾
  □ 伏笔回收率 > 90%
  □ 世界观设定自洽

文字层：
  □ 无高频重复词（单词出现 < 总字数的 0.1%）
  □ 无冗余表达
  □ 对话标签适度
  □ 无明显 AI 痕迹
  □ 符合个人风格指南

全部通过 → 修改完成，可以导出
```

---

## Task 2: 创建 revision-polish Skill 文件

**Files:**
- Create: `templates/skills/writing-techniques/revision-polish/SKILL.md`

**内容框架：**

```markdown
---
name: revision-polish
description: "Use when user has completed a draft (3+ chapters) and wants to systematically revise and polish - provides structured four-layer revision from structure to line editing"
allowed-tools: Read, Write
---

# 修改润色 (Revision & Polish)

## 快速参考

### 何时使用
- 用户完成初稿（至少 3 章）
- 用户说"帮我改""润色""修改"
- /analyze 发现问题后，用户想修复
- 准备导出前的最终打磨

### 自动激活时机
- 用户说"修改""润色""改稿""打磨"
- /analyze 完成后用户说"怎么改"
- /export 前检测到未经修改的初稿

## 核心原则

### 1. 分层修改，从大到小
先结构，再节奏，再一致性，最后文字。
不要在结构未定时打磨文字。

### 2. 保持作者风格
读取 personal-voice.md，修改时保持用户的个人风格。
润色 ≠ 改成"标准好文"，而是"更好的你的风格"。

### 3. 有明确终点
提供修改完成检查清单，避免无限循环。
每层修改有明确的"通过标准"。

### 4. 可操作的建议
不只说"节奏慢"，而是说"第 11 章删减第 3-5 段的环境描写（约 800 字），
替换为一个简短的冲突事件"。

## 实践应用

### 执行流程

Step 1: 评估初稿状态
  读取所有章节，生成初稿评估报告
  确定需要哪些层次的修改

Step 2: 结构修改（如需要）
  审查章节结构，提出调整建议
  用户确认后执行

Step 3: 节奏修改（如需要）
  分析节奏曲线，标记问题区域
  提供具体的节奏调整方案

Step 4: 一致性修改
  检查角色、时间线、世界观、伏笔
  列出所有矛盾和遗漏

Step 5: 文字润色
  逐章扫描文字问题
  提供具体的替换建议

Step 6: 最终检查
  运行修改完成检查清单
  确认所有层次通过
```

---

## Task 3: 创建修改润色命令集成

**Files:**
- Create: `templates/commands/revise.md`

**内容框架：**

```markdown
---
title: 修改润色 - /revise
description: 系统性修改初稿，从结构到文字的四层修改流程
---

# 修改润色

## 使用方法

### 完整修改流程
/revise                              # 完整四层修改
/revise --layer structure            # 仅结构修改
/revise --layer pacing               # 仅节奏修改
/revise --layer consistency          # 仅一致性修改
/revise --layer polish               # 仅文字润色

### 指定范围
/revise --chapters 1-10              # 修改第 1-10 章
/revise --chapter 5                  # 修改第 5 章

### 快速模式
/revise --quick                      # 跳过结构和节奏，直接做一致性+文字

### 与 /analyze 联动
/analyze → 发现问题 → /revise        # 先诊断再治疗
```

---

## Task 4: 创建修改润色专家

**Files:**
- Create: `templates/skills/writing-techniques/revision-polish/experts/revision-editor.md`

**内容框架：**

```markdown
---
title: 修改润色编辑 - expert:revision-editor
description: 专业的小说修改编辑，精通从结构到文字的系统性修改
---

# 修改润色编辑

你是一位专业的小说修改编辑。你的工作不是重写，而是帮助作者
把初稿打磨成更好的版本，同时保持作者的个人风格。

## 核心能力

### 1. 结构编辑（Structural Editing）
- 评估整体叙事结构
- 识别多余/缺失的章节
- 优化高潮和转折点位置
- 平衡主线与支线

### 2. 节奏编辑（Pacing Editing）
- 分析节奏曲线
- 识别拖沓和过快的段落
- 优化紧张/舒缓交替
- 确保章节结尾有钩子

### 3. 一致性编辑（Consistency Editing）
- 角色性格和外貌一致性
- 时间线逻辑
- 世界观自洽
- 伏笔回收

### 4. 文字编辑（Line Editing）
- 消除重复用词
- 删减冗余表达
- 优化句式变化
- 清除 AI 痕迹
- 保持作者个人风格

## 工作原则

1. **尊重作者风格** - 不把文章改成"你的风格"
2. **解释修改理由** - 每个修改都说明为什么
3. **提供选择** - 给出 2-3 个修改方案让作者选
4. **保守修改** - 能不改就不改，只改真正有问题的
```

---

## Task 5: 与现有命令和 Skill 集成

**Files:**
- Modify: `templates/commands/analyze.md`（添加 /revise 引导）
- Modify: `templates/skills/quality-assurance/pre-write-checklist/SKILL.md`（添加修改状态检查）

**Step 1: /analyze 完成后引导到 /revise**

在 /analyze 输出末尾添加：
```
分析完成。

如需系统性修改，可执行：
  /revise                    完整四层修改
  /revise --layer polish     仅文字润色
  /revise --quick            快速修改（一致性+文字）
```

**Step 2: pre-write-checklist 添加修改状态**

```
修改状态检查：
  □ 初稿是否经过修改润色？
  □ 如果是续写，前文是否已润色？
```

---

## Task 6: 验证和提交

**验证标准：**
- [ ] Skill 文件结构符合现有模式（YAML front matter + 核心原则 + 实践应用）
- [ ] 四层修改模型清晰可执行
- [ ] 修改完成检查清单具体可验证
- [ ] 与 /analyze 的互补关系明确（诊断 vs 治疗）
- [ ] 保持作者风格的原则贯穿始终
- [ ] 命令选项设计合理（--layer, --chapters, --quick）

**提交：**

```bash
git add templates/skills/writing-techniques/revision-polish/
git add templates/commands/revise.md
git commit -m "feat(skills): 添加修改润色 Skill

- 四层修改模型：结构 → 节奏 → 一致性 → 文字
- /revise 命令：支持分层修改、指定范围、快速模式
- revision-editor 专家：专业修改编辑角色
- 修改完成检查清单：明确的终止标准
- 与 /analyze 互补：诊断 → 治疗完整流程
- 保持作者风格：读取 personal-voice.md

核心理念：
- 从大到小分层修改，避免无效劳动
- 可操作的具体建议，不只是发现问题
- 有明确终点，避免无限修改循环

Closes: P3 优先级任务 #5"
```

---

## 预估工作量

| Task | 内容 | 预估时间 |
|------|------|---------|
| 1 | 设计分层修改流程 | 2-3h |
| 2 | Skill 文件编写 | 4-6h |
| 3 | /revise 命令编写 | 3-4h |
| 4 | 修改润色专家编写 | 2-3h |
| 5 | 集成现有命令/Skill | 1-2h |
| 6 | 验证和提交 | 1-2h |

**总计：** 13-20 小时

---

## 成功标准

**用户反馈目标：**
- "终于知道怎么系统地改稿了"
- "不再陷入无限修改循环"
- "改完之后质量明显提升，但还是我的风格"

**技术指标：**
- 四层修改覆盖率 100%（结构、节奏、一致性、文字）
- 修改建议可操作性 > 90%（具体到段落/句子级别）
- 风格保持度 > 85%（修改后仍符合 personal-voice.md）
- 用户满意度 > 80%
