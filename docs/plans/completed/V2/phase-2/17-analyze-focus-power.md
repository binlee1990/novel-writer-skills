# Task 17: `/analyze --focus=power` åŠ›é‡ä½“ç³»ä¸€è‡´æ€§åˆ†æ

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** åœ¨ `/analyze` ä¸­æ–°å¢ `--focus=power` ä¸“é¡¹åˆ†æï¼Œæ£€æµ‹åŠ›é‡ä½“ç³»æå†™çš„ä¸€è‡´æ€§ï¼ˆæˆ˜åŠ›æ ‡å‡†ã€å¢ƒç•Œè¡¨ç°ã€è¶Šçº§è§„åˆ™ï¼‰

**Architecture:** åœ¨ `analyze.md` çš„ B5.1 ä¸“é¡¹åˆ†æä¸­æ–°å¢ã€Œä¸“é¡¹ 9ï¼šåŠ›é‡ä½“ç³»ä¸€è‡´æ€§åˆ†æã€ã€‚åŒæ—¶å¢å¼º `consistency-checker` Skillï¼Œæ·»åŠ åŠ›é‡ä½“ç³»ä¸“é¡¹æ£€æŸ¥èƒ½åŠ›ã€‚

**ä¾èµ–:** Phase 1b Task 12ï¼ˆ`power-system.md` çŸ¥è¯†åº“ï¼‰

**Tech Stack:** Markdown æ¨¡æ¿

---

### Task 17.1: åœ¨ analyze.md å†³ç­–é€»è¾‘ä¸­æ³¨å†Œ --focus=power

**Files:**
- Modify: `templates/commands/analyze.md`ï¼ˆä¸“é¡¹åˆ†ææ¨¡å¼åˆ—è¡¨ï¼‰

**Step 1: åœ¨ä¸“é¡¹åˆ†ææ¨¡å¼åˆ—è¡¨ä¸­æ·»åŠ  power**

åœ¨ `--focus=hook` ä¹‹åæ·»åŠ ï¼š

```markdown
- åŒ…å« `--focus=power` â†’ åŠ›é‡ä½“ç³»ä¸€è‡´æ€§åˆ†æï¼ˆé‡ç‚¹æ£€æŸ¥æˆ˜åŠ›æ ‡å‡†ã€å¢ƒç•Œè¡¨ç°ã€è¶Šçº§è§„åˆ™çš„ä¸€è‡´æ€§ï¼‰
```

**Step 2: Commit**

```bash
git add templates/commands/analyze.md
git commit -m "feat(analyze): register --focus=power in decision logic"
```

---

### Task 17.2: åœ¨ B5.1 ä¸­æ·»åŠ ã€Œä¸“é¡¹ 9ï¼šåŠ›é‡ä½“ç³»ä¸€è‡´æ€§åˆ†æã€

**Files:**
- Modify: `templates/commands/analyze.md`ï¼ˆä¸“é¡¹ 8 ä¹‹åï¼‰

**Step 1: åœ¨ä¸“é¡¹ 8 ç»“æŸåæ’å…¥**

```markdown

#### ä¸“é¡¹ 9ï¼šåŠ›é‡ä½“ç³»ä¸€è‡´æ€§åˆ†æï¼ˆ`--focus=power`ï¼‰

**è§¦å‘æ¡ä»¶**ï¼š`$ARGUMENTS` åŒ…å« `--focus=power`

**å‰ç½®åŠ è½½**ï¼š
- åŠ è½½ Skillï¼š`templates/skills/quality-assurance/consistency-checker/SKILL.md`
- åŠ è½½çŸ¥è¯†åº“ï¼š`templates/knowledge-base/craft/power-system.md`
- è¯»å– `specification.md` ä¸­çš„åŠ›é‡ä½“ç³»è®¾å®š
- è¯»å– `spec/world-setting.json`ï¼ˆå¦‚å­˜åœ¨ï¼‰
- è¯»å–æ‰€æœ‰å·²å†™ç« èŠ‚å†…å®¹

**åˆ†æç»´åº¦**ï¼š

##### 9.1 å¢ƒç•Œè¡¨ç°ä¸€è‡´æ€§

é€ç« æ‰«ææ‰€æœ‰æ¶‰åŠåŠ›é‡/æˆ˜æ–—çš„æå†™ï¼Œæ£€æŸ¥ï¼š
- åŒå¢ƒç•Œè§’è‰²çš„èƒ½åŠ›è¡¨ç°æ˜¯å¦ä¸€è‡´
- ä¸åŒç« èŠ‚ä¸­åŒä¸€å¢ƒç•Œçš„æå†™æ˜¯å¦çŸ›ç›¾
- å¢ƒç•Œå·®è·æ˜¯å¦ä¿æŒç¨³å®šï¼ˆå‰æœŸå’ŒåæœŸå¯¹æ¯”ï¼‰

**è¾“å‡ºæ ¼å¼**ï¼š
```
ğŸ“Š å¢ƒç•Œè¡¨ç°ä¸€è‡´æ€§
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

| å¢ƒç•Œ | å‡ºç°ç« èŠ‚ | èƒ½åŠ›æå†™ | ä¸€è‡´æ€§ |
|------|---------|---------|--------|
| [å¢ƒç•ŒA] | ç¬¬ 3, 8, 15 ç«  | ç¢çŸ³/é£è¡Œ/... | âœ… ä¸€è‡´ |
| [å¢ƒç•ŒB] | ç¬¬ 5, 12, 20 ç«  | ç¢å¢™â†’ç¢å±±(!) | âš ï¸ ç¬¬ 20 ç« åå¼º |

âš ï¸ å‘ç° [N] å¤„ä¸ä¸€è‡´
```

##### 9.2 è¶Šçº§æˆ˜æ–—åˆç†æ€§

æ£€æŸ¥æ‰€æœ‰è¶Šçº§æˆ˜æ–—åœºæ™¯ï¼š
- æ˜¯å¦æœ‰åˆç†çš„ã€Œå¤–æŒ‚ã€è§£é‡Šï¼ˆæ³•å®ã€è¡€è„‰ã€ç§˜æœ¯ï¼‰
- è¶Šçº§å¹…åº¦æ˜¯å¦åœ¨è®¾å®šèŒƒå›´å†…
- è¶Šçº§é¢‘ç‡æ˜¯å¦è¿‡é«˜

**è¾“å‡ºæ ¼å¼**ï¼š
```
âš”ï¸ è¶Šçº§æˆ˜æ–—æ£€æŸ¥
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

| ç« èŠ‚ | ä¸»è§’å¢ƒç•Œ | å¯¹æ‰‹å¢ƒç•Œ | è¶Šçº§å¹…åº¦ | è§£é‡Š | åˆç†æ€§ |
|------|---------|---------|---------|------|--------|
| ç¬¬ 5 ç«  | ç­‰çº§ 1 | ç­‰çº§ 2 | 1 å°çº§ | æ³•å® | âœ… |
| ç¬¬ 12 ç«  | ç­‰çº§ 2 | ç­‰çº§ 4 | 2 å¤§çº§ | æ—  | âŒ ç¼ºä¹è§£é‡Š |

è¶Šçº§é¢‘ç‡ï¼š[N] æ¬¡ / [M] ç« ï¼ˆ[X]%ï¼‰
å»ºè®®é¢‘ç‡ï¼šâ‰¤ 20%
```

##### 9.3 æˆ˜åŠ›å‚ç…§ä¸€è‡´æ€§

å¯¹æ¯”å·²å†™å†…å®¹ä¸ `world-setting.json` ä¸­çš„æˆ˜åŠ›å‚ç…§è¡¨ï¼š
- å®é™…æå†™æ˜¯å¦ç¬¦åˆè®¾å®š
- æ˜¯å¦æœ‰è¶…å‡ºè®¾å®šä¸Šé™çš„æå†™
- æ˜¯å¦æœ‰ä½äºè®¾å®šä¸‹é™çš„æå†™

##### 9.4 ç»¼åˆæŠ¥å‘Š

```
ğŸ”® åŠ›é‡ä½“ç³»ä¸€è‡´æ€§æŠ¥å‘Š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å¢ƒç•Œä¸€è‡´æ€§ï¼š[X]/10
è¶Šçº§åˆç†æ€§ï¼š[X]/10
æˆ˜åŠ›æ ‡å‡†åŒ–ï¼š[X]/10
ç»¼åˆè¯„åˆ†ï¼š[X]/10

ğŸ”´ ä¸¥é‡é—®é¢˜ï¼š[N] ä¸ª
âš ï¸ ä¸­åº¦é—®é¢˜ï¼š[N] ä¸ª
ğŸ’¡ å»ºè®®ï¼š[N] ä¸ª
```
```

**Step 2: Commit**

```bash
git add templates/commands/analyze.md
git commit -m "feat(analyze): add --focus=power for power system consistency analysis"
```

---

### Task 17.3: å¢å¼º consistency-checker Skill

**Files:**
- Modify: `templates/skills/quality-assurance/consistency-checker/SKILL.md`

**Step 1: åœ¨ SKILL.md æœ«å°¾æ·»åŠ åŠ›é‡ä½“ç³»æ£€æŸ¥èƒ½åŠ›**

```markdown

---

## æ‰©å±•èƒ½åŠ›ï¼šåŠ›é‡ä½“ç³»ä¸€è‡´æ€§æ£€æŸ¥

> ä»¥ä¸‹èƒ½åŠ›åœ¨ `/analyze --focus=power` è°ƒç”¨æ—¶æ¿€æ´»

### æ£€æŸ¥é¡¹

1. **å¢ƒç•Œèƒ½åŠ›åŸºå‡†**ï¼šæ¯ä¸ªå¢ƒç•Œçš„æ ‡å¿—æ€§èƒ½åŠ›æ˜¯å¦åœ¨æ‰€æœ‰ç« èŠ‚ä¸­ä¿æŒä¸€è‡´
2. **æˆ˜åŠ›æ•°å€¼æ„Ÿ**ï¼šåŒå¢ƒç•Œæˆ˜æ–—çš„æå†™å¼ºåº¦æ˜¯å¦ç¨³å®š
3. **è¶Šçº§æ¡ä»¶**ï¼šè¶Šçº§æˆ˜æ–—æ˜¯å¦æ¯æ¬¡éƒ½æœ‰ä¸åŒçš„åˆç†è§£é‡Š
4. **é…è§’æˆ˜åŠ›é”šå®š**ï¼šé‡è¦é…è§’çš„æˆ˜åŠ›æ˜¯å¦éšå‰§æƒ…éœ€è¦å¿½å¼ºå¿½å¼±
5. **æ–°è§’è‰²æˆ˜åŠ›**ï¼šæ–°å‡ºåœºè§’è‰²çš„æˆ˜åŠ›æ˜¯å¦ä¸å·²æœ‰ä½“ç³»å…¼å®¹

### æ•°æ®æº

- `specification.md` ä¸­çš„åŠ›é‡ä½“ç³»è®¾å®š
- `spec/world-setting.json` ä¸­çš„æˆ˜åŠ›å‚ç…§è¡¨
- å·²å†™ç« èŠ‚ä¸­çš„æˆ˜æ–—/èƒ½åŠ›æå†™
- `character-state.json` ä¸­çš„è§’è‰²å¢ƒç•Œè®°å½•
```

**Step 2: Commit**

```bash
git add templates/skills/quality-assurance/consistency-checker/SKILL.md
git commit -m "feat(skill): enhance consistency-checker with power system analysis capability"
```
