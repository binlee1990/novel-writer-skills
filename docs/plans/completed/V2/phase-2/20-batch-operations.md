# Task 20: æ‰¹é‡æ“ä½œæ”¯æŒ

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** ä¸º `/plan`ã€`/analyze`ã€`/track` æ·»åŠ æ‰¹é‡æ“ä½œå‚æ•°ï¼Œæ”¯æŒå¤šå·è§„åˆ’ã€èŒƒå›´åˆ†æã€æ‰¹é‡åŒæ­¥

**Architecture:** åœ¨ä¸‰ä¸ªå‘½ä»¤çš„å‚æ•°è§£æéƒ¨åˆ†åˆ†åˆ«æ·»åŠ æ‰¹é‡å‚æ•°æ£€æµ‹å’Œå¤„ç†é€»è¾‘ã€‚

**Tech Stack:** Markdown æ¨¡æ¿

---

### Task 20.1: `/plan` æ‰¹é‡å·è§„åˆ’

**Files:**
- Modify: `templates/commands/plan.md`ï¼ˆå‚æ•°è§£æéƒ¨åˆ†ï¼‰

**Step 1: åœ¨ --detail å‚æ•°è§£æä¸­æ”¯æŒèŒƒå›´**

åœ¨ `plan.md` çš„å‚æ•°è§£æéƒ¨åˆ†ï¼Œæ‰©å±• `--detail` å‚æ•°æ”¯æŒèŒƒå›´ï¼š

```markdown
#### æ‰¹é‡å·è§„åˆ’

**å‚æ•°æ ¼å¼**ï¼š`--detail vol-01-03`ï¼ˆè§„åˆ’ç¬¬ 1 åˆ°ç¬¬ 3 å·ï¼‰

**è§£æè§„åˆ™**ï¼š
- `--detail vol-01` â†’ å•å·è§„åˆ’ï¼ˆå·²æœ‰åŠŸèƒ½ï¼‰
- `--detail vol-01-03` â†’ æ‰¹é‡è§„åˆ’ç¬¬ 1ã€2ã€3 å·
- `--detail vol-all` â†’ è§„åˆ’æ‰€æœ‰å·

**æ‰¹é‡æ‰§è¡Œé€»è¾‘**ï¼š
1. æŒ‰å·åºå·ä¾æ¬¡æ‰§è¡Œå·çº§è¯¦ç»†è§„åˆ’ï¼ˆ2.2.1ï¼‰
2. æ¯å·è§„åˆ’å®Œæˆåè¾“å‡ºè¯¥å·çš„èŠ‚å¥æ€»è§ˆ
3. å…¨éƒ¨å®Œæˆåè¾“å‡ºè·¨å·å¯¹æ¯”ï¼š

```
ğŸ“Š å¤šå·èŠ‚å¥å¯¹æ¯”
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
| å· | ç« èŠ‚æ•° | çˆ½ç‚¹æ•° | å¹³å‡é’©å­å¼ºåº¦ | é«˜æ½®ç« èŠ‚ |
|----|--------|--------|------------|---------|
| ç¬¬ 1 å· | 30 | 8 | â­â­â­ | ç¬¬ 28 ç«  |
| ç¬¬ 2 å· | 30 | 10 | â­â­â­â­ | ç¬¬ 58 ç«  |
| ç¬¬ 3 å· | 25 | 12 | â­â­â­â­ | ç¬¬ 82 ç«  |

âœ… çˆ½ç‚¹é€’è¿›ï¼šæ­£å¸¸ï¼ˆåå· â‰¥ å‰å·ï¼‰
âœ… é’©å­å¼ºåº¦ï¼šé€’è¿›
âš ï¸ ç¬¬ 3 å·ç« èŠ‚æ•°åå°‘ï¼Œè€ƒè™‘æ˜¯å¦éœ€è¦æ‰©å±•
```
```

**Step 2: Commit**

```bash
git add templates/commands/plan.md
git commit -m "feat(plan): add batch volume planning (--detail vol-01-03, --detail vol-all)"
```

---

### Task 20.2: `/analyze` èŒƒå›´åˆ†æ

**Files:**
- Modify: `templates/commands/analyze.md`ï¼ˆå‚æ•°è§£æéƒ¨åˆ†ï¼‰

**Step 1: åœ¨å‚æ•°è§£æä¸­æ·»åŠ  --range æ”¯æŒ**

```markdown
#### èŒƒå›´åˆ†æ

**å‚æ•°æ ¼å¼**ï¼š`--range=ch5-ch10` æˆ– `--range=vol-02`

**è§£æè§„åˆ™**ï¼š
- `--range=ch5-ch10` â†’ ä»…åˆ†æç¬¬ 5 åˆ°ç¬¬ 10 ç« 
- `--range=ch5-` â†’ åˆ†æç¬¬ 5 ç« åˆ°æœ€æ–°ç« èŠ‚
- `--range=vol-02` â†’ åˆ†æç¬¬ 2 å·çš„æ‰€æœ‰ç« èŠ‚
- æ—  `--range` â†’ åˆ†ææ‰€æœ‰å·²å†™ç« èŠ‚ï¼ˆé»˜è®¤ï¼‰

**æ‰§è¡Œé€»è¾‘**ï¼š
1. æ ¹æ®èŒƒå›´å‚æ•°ç­›é€‰ç« èŠ‚æ–‡ä»¶
2. ä»…å¯¹ç­›é€‰åçš„ç« èŠ‚æ‰§è¡Œåˆ†æ
3. åœ¨æŠ¥å‘Šæ ‡é¢˜ä¸­æ ‡æ³¨åˆ†æèŒƒå›´

**ä¸ --focus ç»„åˆ**ï¼š
- `--focus=hook --range=ch5-ch10` â†’ ä»…åˆ†æç¬¬ 5-10 ç« çš„é’©å­
- `--focus=reader --range=vol-02` â†’ ä»…åˆ†æç¬¬ 2 å·çš„è¯»è€…ä½“éªŒ
- `--focus=power --range=ch1-ch20` â†’ ä»…åˆ†æå‰ 20 ç« çš„åŠ›é‡ä½“ç³»
```

**Step 2: Commit**

```bash
git add templates/commands/analyze.md
git commit -m "feat(analyze): add --range parameter for scoped analysis (chapter range, volume)"
```

---

### Task 20.3: `/track` æ‰¹é‡åŒæ­¥

**Files:**
- Modify: `templates/commands/track.md`ï¼ˆå‚æ•°è§£æéƒ¨åˆ†ï¼‰

**Step 1: åœ¨å‚æ•°è§£æä¸­æ·»åŠ  --sync èŒƒå›´æ”¯æŒ**

```markdown
#### æ‰¹é‡åŒæ­¥

**å‚æ•°æ ¼å¼**ï¼š`--sync=ch5-ch10`

**è§£æè§„åˆ™**ï¼š
- `--sync` â†’ åŒæ­¥æœ€æ–°ä¸€ç« çš„ tracking æ•°æ®ï¼ˆé»˜è®¤ï¼‰
- `--sync=ch5-ch10` â†’ æ‰¹é‡åŒæ­¥ç¬¬ 5 åˆ°ç¬¬ 10 ç« çš„ tracking æ•°æ®
- `--sync=all` â†’ é‡æ–°åŒæ­¥æ‰€æœ‰ç« èŠ‚çš„ tracking æ•°æ®ï¼ˆå…¨é‡é‡å»ºï¼‰

**æ‰§è¡Œé€»è¾‘**ï¼š
1. æŒ‰ç« èŠ‚é¡ºåºä¾æ¬¡å¤„ç†
2. æ¯ç« æå–ï¼šè§’è‰²å‡ºåœºã€æƒ…èŠ‚äº‹ä»¶ã€æ—¶é—´çº¿äº‹ä»¶ã€å…³ç³»å˜åŒ–
3. æ›´æ–°å¯¹åº”çš„ tracking JSON æ–‡ä»¶
4. è¾“å‡ºåŒæ­¥æ‘˜è¦ï¼š

```
ğŸ“Š æ‰¹é‡åŒæ­¥å®Œæˆ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
åŒæ­¥èŒƒå›´ï¼šç¬¬ 5-10 ç« 
è§’è‰²æ›´æ–°ï¼š[N] æ¡
æƒ…èŠ‚äº‹ä»¶ï¼š[M] æ¡
æ—¶é—´çº¿äº‹ä»¶ï¼š[K] æ¡
å…³ç³»å˜åŒ–ï¼š[L] æ¡

âš ï¸ å†²çªï¼š[å¦‚æœ‰å†²çªåˆ—å‡º]
```
```

**Step 2: Commit**

```bash
git add templates/commands/track.md
git commit -m "feat(track): add batch sync support (--sync=ch5-ch10, --sync=all)"
```
