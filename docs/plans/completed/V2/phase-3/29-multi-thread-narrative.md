# Task 29: å¤šçº¿å™äº‹ç®¡ç†ç³»ç»Ÿ

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** å¢å¼º `multi-thread-narrative` Skillï¼Œæ–°å¢ `narrative-threads.json` tracking ç»´åº¦ï¼Œæ”¯æŒè§†è§’åˆ‡æ¢è§„åˆ’ã€ä¿¡æ¯å·®è¿½è¸ªã€å™äº‹çº¿äº¤æ±‡è®¾è®¡

**Architecture:** åœ¨ `templates/skills/writing-techniques/multi-thread-narrative/SKILL.md` ä¸­æ‰©å±•èƒ½åŠ›ï¼ŒåŒæ—¶å®šä¹‰ `narrative-threads.json` çš„æ•°æ®ç»“æ„ï¼Œé›†æˆåˆ° `/track` çš„åŒæ­¥æµç¨‹ä¸­ã€‚

**Tech Stack:** Markdown Skill æ¨¡æ¿ã€JSON æ•°æ®

---

### Task 29.1: å®šä¹‰ narrative-threads.json æ•°æ®ç»“æ„

**Files:**
- æ–‡æ¡£å®šä¹‰ï¼ˆå®é™…æ–‡ä»¶ç”± /track è¿è¡Œæ—¶ç”Ÿæˆï¼‰

**Step 1: å®šä¹‰æ•°æ®ç»“æ„**

```json
{
  "version": "1.0",
  "threads": [
    {
      "id": "thread-001",
      "name": "[å™äº‹çº¿åç§°]",
      "type": "main|sub|hidden",
      "pov": "[è§†è§’è§’è‰²]",
      "status": "active|paused|resolved|abandoned",
      "startChapter": 1,
      "lastActiveChapter": 15,
      "chapters": [1, 3, 5, 8, 12, 15],
      "summary": "[å™äº‹çº¿æ¦‚è¦]",
      "goal": "[å™äº‹çº¿ç›®æ ‡/ç»ˆç‚¹]",
      "currentState": "[å½“å‰è¿›å±•]",
      "informationState": {
        "readerKnows": ["[è¯»è€…å·²çŸ¥ä¿¡æ¯]"],
        "characterKnows": {
          "[è§’è‰²A]": ["[è§’è‰²Aå·²çŸ¥ä¿¡æ¯]"],
          "[è§’è‰²B]": ["[è§’è‰²Bå·²çŸ¥ä¿¡æ¯]"]
        },
        "hiddenFromReader": ["[è¯»è€…å°šä¸çŸ¥é“çš„ä¿¡æ¯]"]
      },
      "intersections": [
        {
          "withThread": "thread-002",
          "chapter": 20,
          "type": "merge|cross|diverge",
          "description": "[äº¤æ±‡æè¿°]"
        }
      ]
    }
  ],
  "povSchedule": [
    {
      "chapter": 1,
      "pov": "[è§†è§’è§’è‰²]",
      "thread": "thread-001"
    }
  ],
  "updatedAt": "[ISOæ—¥æœŸ]"
}
```

---

### Task 29.2: å¢å¼º multi-thread-narrative SKILL.md

**Files:**
- Modify: `templates/skills/writing-techniques/multi-thread-narrative/SKILL.md`

**Step 1: åœ¨ç°æœ‰èƒ½åŠ›ä¹‹åæ·»åŠ æ‰©å±•ç« èŠ‚**

```markdown

---

## æ‰©å±•èƒ½åŠ›

### æ‰©å±• 1ï¼šè§†è§’åˆ‡æ¢è§„åˆ’

**ç®¡ç†å¤šè§†è§’å™äº‹çš„åˆ‡æ¢èŠ‚å¥**ï¼š

#### è§†è§’åˆ‡æ¢è§„åˆ™

| è§„åˆ™ | è¯´æ˜ |
|------|------|
| åˆ‡æ¢é¢‘ç‡ | åŒä¸€è§†è§’è‡³å°‘æŒç»­ 1 ç« ï¼Œå»ºè®® 2-3 ç«  |
| åˆ‡æ¢æ—¶æœº | åœ¨å½“å‰è§†è§’çš„æ‚¬å¿µ/é’©å­å¤„åˆ‡æ¢ï¼ˆæœ€å¤§åŒ–å¼ åŠ›ï¼‰ |
| å›å½’æ—¶æœº | åˆ‡æ¢å 3-5 ç« å†…å›åˆ°åŸè§†è§’ï¼ˆé¿å…è¯»è€…é—å¿˜ï¼‰ |
| ä¿¡æ¯è¡”æ¥ | åˆ‡æ¢åçš„è§†è§’åº”æä¾›æ–°ä¿¡æ¯æˆ–æ–°è§†è§’ |

#### è§†è§’è°ƒåº¦è¡¨

```
ğŸ“Š è§†è§’è°ƒåº¦
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

| ç« èŠ‚ | è§†è§’ | å™äº‹çº¿ | åˆ‡æ¢ç†ç”± |
|------|------|--------|---------|
| ç¬¬ 1-3 ç«  | ä¸»è§’ | ä¸»çº¿ | å¼€ç¯‡å»ºç«‹ |
| ç¬¬ 4 ç«  | è§’è‰²B | æ”¯çº¿1 | ä¸»çº¿æ‚¬å¿µå¤„åˆ‡æ¢ |
| ç¬¬ 5-6 ç«  | è§’è‰²B | æ”¯çº¿1 | å±•ç¤ºå¦ä¸€é¢ |
| ç¬¬ 7-9 ç«  | ä¸»è§’ | ä¸»çº¿ | å›å½’ä¸»çº¿ |
| ç¬¬ 10 ç«  | è§’è‰²C | æ”¯çº¿2 | å¼•å…¥æ–°çº¿ç´¢ |
| ... | ... | ... | ... |

âš ï¸ è­¦å‘Šï¼š
- è§’è‰²B è§†è§’å·² 8 ç« æœªå‡ºç°ï¼Œè¯»è€…å¯èƒ½é—å¿˜
- ä¸»è§’è§†è§’è¿ç»­ 5 ç« ï¼Œè€ƒè™‘åˆ‡æ¢
```

### æ‰©å±• 2ï¼šä¿¡æ¯å·®è¿½è¸ª

**è¿½è¸ªä¸åŒè§’è‰²å’Œè¯»è€…ä¹‹é—´çš„ä¿¡æ¯å·®**ï¼š

#### ä¿¡æ¯å·®çŸ©é˜µ

```
ğŸ“Š ä¿¡æ¯å·®çŸ©é˜µ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ä¿¡æ¯ï¼š[å…³é”®ä¿¡æ¯æè¿°]

| çŸ¥æƒ…è€… | çŠ¶æ€ | è·çŸ¥ç« èŠ‚ |
|--------|------|---------|
| è¯»è€… | âœ… å·²çŸ¥ | ç¬¬ 5 ç«  |
| ä¸»è§’ | âŒ æœªçŸ¥ | â€” |
| è§’è‰²A | âœ… å·²çŸ¥ | ç¬¬ 3 ç«  |
| è§’è‰²B | âŒ æœªçŸ¥ | â€” |

å¼ åŠ›ç±»å‹ï¼šæˆå‰§æ€§åè®½ï¼ˆè¯»è€…çŸ¥é“ï¼Œä¸»è§’ä¸çŸ¥é“ï¼‰
é¢„è®¡æ­ç¤ºï¼šç¬¬ [N] ç« 
```

#### ä¿¡æ¯å·®æ±‡æ€»

```
ğŸ“‹ æ´»è·ƒä¿¡æ¯å·®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. [ä¿¡æ¯A] â€” è¯»è€…âœ… ä¸»è§’âŒ â†’ æˆå‰§æ€§åè®½ï¼ˆæŒç»­ [N] ç« ï¼‰
2. [ä¿¡æ¯B] â€” è¯»è€…âŒ è§’è‰²Aâœ… â†’ æ‚¬å¿µï¼ˆæŒç»­ [M] ç« ï¼‰
3. [ä¿¡æ¯C] â€” è§’è‰²Aâœ… è§’è‰²BâŒ â†’ äººé™…å¼ åŠ›ï¼ˆæŒç»­ [K] ç« ï¼‰

âš ï¸ ä¿¡æ¯å·® #1 å·²æŒç»­ 8 ç« ï¼Œè€ƒè™‘åœ¨è¿‘æœŸæ­ç¤º
```

### æ‰©å±• 3ï¼šå™äº‹çº¿äº¤æ±‡è®¾è®¡

**è§„åˆ’å¤šæ¡å™äº‹çº¿çš„äº¤æ±‡æ—¶æœºå’Œæ–¹å¼**ï¼š

#### äº¤æ±‡ç±»å‹

| ç±»å‹ | æè¿° | æ•ˆæœ |
|------|------|------|
| åˆæµ (merge) | ä¸¤æ¡çº¿åˆä¸ºä¸€æ¡ | ä¿¡æ¯æ±‡èšï¼Œå†²çªå‡çº§ |
| äº¤å‰ (cross) | ä¸¤æ¡çº¿çŸ­æš‚äº¤æ±‡ååˆ†å¼€ | ä¿¡æ¯äº¤æ¢ï¼Œæ–°çº¿ç´¢ |
| åˆ†å‰ (diverge) | ä¸€æ¡çº¿åˆ†ä¸ºä¸¤æ¡ | å¤æ‚åº¦å¢åŠ ï¼Œè§†è§’æ‰©å±• |
| ç¢°æ’ (collision) | ä¸¤æ¡çº¿çš„è§’è‰²ç›´æ¥å†²çª | é«˜æ½®åœºæ™¯ |

#### äº¤æ±‡è§„åˆ’

```
ğŸ“Š å™äº‹çº¿äº¤æ±‡è§„åˆ’
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ä¸»çº¿ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’
                    â†— äº¤å‰(ç¬¬20ç« )
æ”¯çº¿1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ åˆæµ(ç¬¬35ç« )
              â†— äº¤å‰(ç¬¬15ç« )
æ”¯çº¿2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ ç¢°æ’(ç¬¬28ç« )

å…³é”®äº¤æ±‡ç‚¹ï¼š
1. ç¬¬ 15 ç« ï¼šæ”¯çº¿2 ä¸ä¸»çº¿äº¤å‰ï¼ˆè§’è‰²C è·å¾—å…³é”®çº¿ç´¢ï¼‰
2. ç¬¬ 20 ç« ï¼šæ”¯çº¿1 ä¸ä¸»çº¿äº¤å‰ï¼ˆè§’è‰²B ä¸ä¸»è§’ç›¸é‡ï¼‰
3. ç¬¬ 28 ç« ï¼šæ”¯çº¿2 ä¸ä¸»çº¿ç¢°æ’ï¼ˆè§’è‰²C ä¸ä¸»è§’å†²çªï¼‰
4. ç¬¬ 35 ç« ï¼šæ”¯çº¿1 åˆæµå…¥ä¸»çº¿ï¼ˆè§’è‰²B åŠ å…¥ä¸»è§’å›¢é˜Ÿï¼‰
```
```

**Step 2: Commit**

```bash
git add templates/skills/writing-techniques/multi-thread-narrative/SKILL.md
git commit -m "feat(skill): enhance multi-thread-narrative with POV scheduling, information gap tracking, thread intersection design"
```

---

### Task 29.3: é›†æˆåˆ° /track åŒæ­¥æµç¨‹

**Files:**
- Modify: `templates/commands/track.md`

**Step 1: åœ¨ /track çš„åŒæ­¥æµç¨‹ä¸­æ·»åŠ  narrative-threads.json æ›´æ–°**

åœ¨ `/track` çš„ç« èŠ‚åŒæ­¥æµç¨‹ä¸­ï¼Œæ·»åŠ å™äº‹çº¿æ•°æ®çš„æå–å’Œæ›´æ–°ï¼š

```markdown
#### å™äº‹çº¿åŒæ­¥

ä»ç« èŠ‚å†…å®¹ä¸­æå–ï¼š
1. æœ¬ç« çš„è§†è§’è§’è‰² â†’ æ›´æ–° `povSchedule`
2. æœ¬ç« æ¨è¿›äº†å“ªæ¡å™äº‹çº¿ â†’ æ›´æ–°å¯¹åº” thread çš„ `chapters` å’Œ `lastActiveChapter`
3. æœ¬ç« æ˜¯å¦æœ‰ä¿¡æ¯æ­ç¤º â†’ æ›´æ–° `informationState`
4. æœ¬ç« æ˜¯å¦æœ‰å™äº‹çº¿äº¤æ±‡ â†’ æ›´æ–° `intersections`
```

**Step 2: Commit**

```bash
git add templates/commands/track.md
git commit -m "feat(track): add narrative-threads.json sync in chapter tracking flow"
```
