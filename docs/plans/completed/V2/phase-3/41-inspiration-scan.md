# Task 41: çµæ„Ÿæ‰«ææœºåˆ¶å®Œå–„

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** å®Œå–„çµæ„Ÿç®¡ç†æœºåˆ¶ï¼šçµæ„Ÿæ•æ‰ï¼ˆå¿«é€Ÿè®°å½•ï¼‰ã€çµæ„Ÿåˆ†ç±»ã€çµæ„Ÿä¸ç« èŠ‚å…³è”ã€çµæ„Ÿæ¨èï¼ˆåœ¨å†™ä½œæ—¶è‡ªåŠ¨æ¨èç›¸å…³çµæ„Ÿï¼‰

**Architecture:** åœ¨ `/write` å’Œ `/plan` ä¸­é›†æˆçµæ„Ÿæ‰«æï¼Œæ–°å¢ `notes/` ç›®å½•ç®¡ç†çµæ„Ÿç¬”è®°ã€‚

**Tech Stack:** Markdown æ¨¡æ¿

---

### Task 41.1: å®šä¹‰çµæ„Ÿç¬”è®°æ•°æ®ç»“æ„

**Files:**
- æ–‡æ¡£å®šä¹‰ï¼ˆå®é™…æ–‡ä»¶ç”±ç”¨æˆ·åˆ›å»ºæˆ–å‘½ä»¤ç”Ÿæˆï¼‰

**Step 1: å®šä¹‰ notes/ ç›®å½•ç»“æ„**

```
[æ•…äº‹ç›®å½•]/
  notes/
    ideas.json          # çµæ„Ÿç´¢å¼•
    idea-001.md         # å•æ¡çµæ„Ÿè¯¦æƒ…ï¼ˆå¯é€‰ï¼Œç®€çŸ­çµæ„Ÿç›´æ¥å­˜ JSONï¼‰
    idea-002.md
    ...
```

**Step 2: å®šä¹‰ ideas.json æ•°æ®ç»“æ„**

```json
{
  "version": "1.0",
  "ideas": [
    {
      "id": "idea-001",
      "content": "[çµæ„Ÿå†…å®¹ç®€è¿°]",
      "category": "plot|character|world|dialogue|scene|other",
      "tags": ["æˆ˜æ–—", "è½¬æŠ˜", "å¸ˆå§"],
      "status": "new|planned|used|discarded",
      "createdAt": "[ISOæ—¥æœŸ]",
      "usedInChapter": null,
      "relatedChapters": [15, 20],
      "relatedCharacters": ["å¸ˆå§", "ä¸»è§’"],
      "priority": "high|medium|low",
      "detailFile": "idea-001.md"
    }
  ],
  "updatedAt": "[ISOæ—¥æœŸ]"
}
```

---

### Task 41.2: åœ¨ /write ä¸­é›†æˆçµæ„Ÿæ‰«æ

**Files:**
- Modify: `templates/commands/write.md`

**Step 1: åœ¨ /write çš„å‰ç½®å¤„ç†ä¸­æ·»åŠ çµæ„Ÿæ‰«æ**

```markdown
#### çµæ„Ÿæ‰«æï¼ˆå‰ç½®ï¼‰

åœ¨å¼€å§‹å†™ä½œå‰ï¼Œè‡ªåŠ¨æ‰«æ `notes/ideas.json`ï¼Œæ¨èä¸å½“å‰ç« èŠ‚ç›¸å…³çš„çµæ„Ÿï¼š

##### åŒ¹é…è§„åˆ™

| åŒ¹é…ç»´åº¦ | æ–¹æ³• |
|---------|------|
| ç« èŠ‚å…³è” | çµæ„Ÿçš„ `relatedChapters` åŒ…å«å½“å‰ç« èŠ‚å· |
| è§’è‰²å…³è” | çµæ„Ÿçš„ `relatedCharacters` ä¸æœ¬ç« å‡ºåœºè§’è‰²é‡å  |
| æ ‡ç­¾å…³è” | çµæ„Ÿçš„ `tags` ä¸æœ¬ç« è®¡åˆ’å…³é”®è¯é‡å  |
| ç±»åˆ«å…³è” | æœ¬ç« æœ‰æˆ˜æ–— â†’ æ¨è category=scene çš„çµæ„Ÿ |

##### è¾“å‡ºæ ¼å¼

```
ğŸ’¡ ç›¸å…³çµæ„Ÿæé†’
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ä¸ç¬¬ [N] ç« ç›¸å…³çš„çµæ„Ÿï¼ˆ[M] æ¡ï¼‰ï¼š

1. ğŸ’¡ [çµæ„Ÿå†…å®¹]
   æ ‡ç­¾ï¼š#æˆ˜æ–— #å¸ˆå§
   å…³è”ï¼šè§’è‰²ã€Œå¸ˆå§ã€åœ¨æœ¬ç« å‡ºåœº
   çŠ¶æ€ï¼šğŸ†• æœªä½¿ç”¨

2. ğŸ’¡ [çµæ„Ÿå†…å®¹]
   æ ‡ç­¾ï¼š#è½¬æŠ˜
   å…³è”ï¼šæœ¬ç« ä¸ºè½¬æŠ˜ç« èŠ‚
   çŠ¶æ€ï¼šğŸ†• æœªä½¿ç”¨

æ˜¯å¦è¦åœ¨æœ¬ç« ä½¿ç”¨è¿™äº›çµæ„Ÿï¼Ÿï¼ˆå†™ä½œè¿‡ç¨‹ä¸­å¯éšæ—¶å‚è€ƒï¼‰
```
```

**Step 2: åœ¨ /write çš„åç½®å¤„ç†ä¸­æ›´æ–°çµæ„ŸçŠ¶æ€**

```markdown
#### çµæ„ŸçŠ¶æ€æ›´æ–°ï¼ˆåç½®ï¼‰

å†™ä½œå®Œæˆåï¼Œæ£€æŸ¥æœ¬ç« æ˜¯å¦ä½¿ç”¨äº†æ¨èçš„çµæ„Ÿï¼š
- å¦‚æœä½¿ç”¨ â†’ æ›´æ–°çµæ„ŸçŠ¶æ€ä¸º `used`ï¼Œè®°å½• `usedInChapter`
- å¦‚æœæœªä½¿ç”¨ â†’ ä¿æŒ `new` çŠ¶æ€
```

**Step 3: Commit**

```bash
git add templates/commands/write.md
git commit -m "feat(write): integrate inspiration scanning in pre/post processing"
```

---

### Task 41.3: åœ¨ /plan ä¸­é›†æˆçµæ„Ÿåˆ†é…

**Files:**
- Modify: `templates/commands/plan.md`

**Step 1: åœ¨ /plan --detail ä¸­æ·»åŠ çµæ„Ÿåˆ†é…**

```markdown
#### çµæ„Ÿåˆ†é…

åœ¨å·çº§è¯¦ç»†è§„åˆ’æ—¶ï¼Œè‡ªåŠ¨å°†æœªä½¿ç”¨çš„çµæ„Ÿåˆ†é…åˆ°åˆé€‚çš„ç« èŠ‚ï¼š

##### åˆ†é…æµç¨‹

1. è¯»å–æ‰€æœ‰ `status=new` çš„çµæ„Ÿ
2. æ ¹æ®çµæ„Ÿçš„ `tags`ã€`category`ã€`relatedCharacters` åŒ¹é…ç« èŠ‚è®¡åˆ’
3. ç”Ÿæˆåˆ†é…å»ºè®®

##### è¾“å‡ºæ ¼å¼

```
ğŸ’¡ çµæ„Ÿåˆ†é…å»ºè®®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

æœªä½¿ç”¨çµæ„Ÿï¼š[N] æ¡

å»ºè®®åˆ†é…ï¼š
ç¬¬ 26 ç«  â† ğŸ’¡ [çµæ„ŸA]ï¼ˆæ ‡ç­¾åŒ¹é…ï¼š#æˆ˜æ–—ï¼‰
ç¬¬ 28 ç«  â† ğŸ’¡ [çµæ„ŸB]ï¼ˆè§’è‰²åŒ¹é…ï¼šå¸ˆå§ï¼‰
ç¬¬ 30 ç«  â† ğŸ’¡ [çµæ„ŸC]ï¼ˆç±»åˆ«åŒ¹é…ï¼šè½¬æŠ˜ï¼‰

æœªåŒ¹é…çµæ„Ÿï¼ˆ[M] æ¡ï¼‰ï¼š
- ğŸ’¡ [çµæ„ŸD]ï¼ˆæ ‡ç­¾ï¼š#ç»“å±€ï¼‰â†’ å¯èƒ½é€‚åˆåç»­å·
- ğŸ’¡ [çµæ„ŸE]ï¼ˆæ ‡ç­¾ï¼š#ç•ªå¤–ï¼‰â†’ å¯èƒ½é€‚åˆç•ªå¤–ç¯‡

æ˜¯å¦ç¡®è®¤åˆ†é…ï¼Ÿ[Y/N]
```
```

**Step 2: Commit**

```bash
git add templates/commands/plan.md
git commit -m "feat(plan): integrate inspiration allocation in volume detail planning"
```

---

### Task 41.4: çµæ„Ÿå¿«é€Ÿæ•æ‰å…¥å£

**Files:**
- æ–‡æ¡£è¯´æ˜ï¼ˆçµæ„Ÿæ•æ‰é€šè¿‡è‡ªç„¶è¯­è¨€è§¦å‘ï¼Œä¸éœ€è¦ä¸“é—¨å‘½ä»¤ï¼‰

**Step 1: å®šä¹‰çµæ„Ÿæ•æ‰è§¦å‘æ–¹å¼**

```markdown
#### çµæ„Ÿå¿«é€Ÿæ•æ‰

ç”¨æˆ·å¯ä»¥åœ¨ä»»ä½•æ—¶å€™é€šè¿‡ä»¥ä¸‹æ–¹å¼è®°å½•çµæ„Ÿï¼š

1. **ç›´æ¥å‘Šè¯‰ AI**ï¼šã€Œè®°ä¸€ä¸‹ï¼Œæˆ‘æƒ³åˆ°ä¸€ä¸ªæƒ…èŠ‚...ã€
2. **åœ¨ /write è¿‡ç¨‹ä¸­**ï¼šã€Œç­‰ç­‰ï¼Œæˆ‘çªç„¶æƒ³åˆ°...ã€
3. **ä¸“é—¨è®°å½•**ï¼šã€Œå¸®æˆ‘è®°å½•ä¸€ä¸ªçµæ„Ÿï¼š...ã€

AI è¯†åˆ«åˆ°çµæ„Ÿè®°å½•æ„å›¾åï¼š
1. æå–çµæ„Ÿå†…å®¹
2. è‡ªåŠ¨åˆ†ç±»å’Œæ‰“æ ‡ç­¾
3. å†™å…¥ `notes/ideas.json`
4. ç¡®è®¤è®°å½•æˆåŠŸ

```
ğŸ’¡ çµæ„Ÿå·²è®°å½•
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

å†…å®¹ï¼š[çµæ„Ÿå†…å®¹]
åˆ†ç±»ï¼šæƒ…èŠ‚
æ ‡ç­¾ï¼š#è½¬æŠ˜ #åæ´¾
ä¼˜å…ˆçº§ï¼šé«˜

å·²ä¿å­˜è‡³ notes/ideas.jsonï¼ˆID: idea-015ï¼‰
```
```

**Step 2: Commitï¼ˆå¦‚æœ‰æ–‡ä»¶ä¿®æ”¹ï¼‰**

```bash
git commit -m "docs: document inspiration quick-capture mechanism"
```
