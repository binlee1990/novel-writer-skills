# Task 10: `/plan` 爽点节奏规划和钩子设计

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** 在 `/plan` 的全书规划流程中增加爽点分布规划和钩子链设计环节，确保规划阶段就考虑读者体验

**Architecture:** 在 `plan.md` 的 `2.2 章节架构设计` 之后（`2.2.1 卷级详细规划` 之后）插入 `2.2.2 爽点分布规划` 和 `2.2.3 钩子链设计`。这两个环节在全书规划时执行（非 `--detail` 模式），为后续卷级规划提供宏观指导。

**依赖:** Phase 1a Task 4（`hook-design.md` 知识库）

**Tech Stack:** Markdown 模板

---

### Task 10.1: 插入「2.2.2 爽点分布规划」

**Files:**
- Modify: `templates/commands/plan.md`（在 2.2.1 卷级详细规划之后插入）

**Step 1: 在 2.2.1 结束后插入新章节**

```markdown

#### 2.2.2 爽点分布规划

**执行时机**：全书规划时（非 `--detail` 模式）

**前置加载**：
- 如果 `specification.md` 中的类型为网文类（玄幻、都市、言情等）→ 加载对应类型知识库
- 读取 `rhythm-config.json`（如存在）获取节奏参数

**规划步骤**：

##### Step 1: 确定爽点类型池

根据故事类型，确定可用的爽点类型：

| 故事类型 | 主要爽点类型 | 次要爽点类型 |
|---------|------------|------------|
| 玄幻/修仙 | 升级、打脸、获得 | 逆袭、揭秘、认可 |
| 都市 | 打脸、逆袭、认可 | 获得、揭秘 |
| 言情 | 情感满足、误会解除、认可 | 逆袭、揭秘 |
| 悬疑 | 揭秘、反转 | 逆袭、认可 |
| 文学 | 顿悟、和解、成长 | 揭秘 |

##### Step 2: 规划爽点密度

根据目标读者和类型，设定爽点密度目标：

```
📊 爽点密度规划
━━━━━━━━━━━━━━━━━━━━
故事类型：[类型]
目标密度：[X] 个爽点/卷

分布原则：
- 每卷开头 3 章内必须有 1 个爽点（留住读者）
- 每卷高潮必须有 1 个强爽点（⭐⭐⭐⭐ 以上）
- 连续无爽点章节不超过 [N] 章（网文 ≤ 3，文学 ≤ 5）
- 爽点类型至少 3 种（避免单调）
```

##### Step 3: 生成爽点分布表

在 `creative-plan.md` 中记录：

```markdown
## 爽点分布规划

### 全书爽点曲线

| 卷 | 章节范围 | 爽点数 | 主要爽点 | 高潮爽点 |
|----|---------|--------|---------|---------|
| 第 1 卷 | 1-30 | 8 | 打脸×3, 升级×3, 获得×2 | 第 28 章：大反转 |
| 第 2 卷 | 31-60 | 10 | 打脸×2, 升级×4, 逆袭×2, 揭秘×2 | 第 58 章：身世揭秘 |
| ... | ... | ... | ... | ... |

### 爽点递进设计

- 第 1 卷爽点强度：⭐⭐-⭐⭐⭐（建立基线）
- 第 2 卷爽点强度：⭐⭐⭐-⭐⭐⭐⭐（升级）
- 第 3 卷爽点强度：⭐⭐⭐⭐-⭐⭐⭐⭐⭐（高潮）
- ...

原则：后续卷的爽点强度应 ≥ 前卷，避免「越写越无聊」
```
```

**Step 2: Commit**

```bash
git add templates/commands/plan.md
git commit -m "feat(plan): add satisfaction point distribution planning (2.2.2)"
```

---

### Task 10.2: 插入「2.2.3 钩子链设计」

**Files:**
- Modify: `templates/commands/plan.md`（在 2.2.2 之后插入）

**Step 1: 在 2.2.2 结束后插入新章节**

```markdown

#### 2.2.3 钩子链设计

**执行时机**：全书规划时（非 `--detail` 模式）

**前置加载**：
- 加载知识库：`templates/knowledge-base/craft/hook-design.md`（如存在）

**规划步骤**：

##### Step 1: 确定关键钩子节点

在全书结构中标记必须有强钩子的位置：

```
🪝 关键钩子节点
━━━━━━━━━━━━━━━━━━━━

必须有强钩子（⭐⭐⭐⭐ 以上）的位置：
- 第 1 章结尾（决定读者是否继续）
- 每卷最后一章（决定读者是否追下一卷）
- 重大转折前一章（制造期待）
- 免费章节最后一章（付费转化关键点，如适用）

建议有中等钩子（⭐⭐⭐）的位置：
- 每个小高潮前一章
- 视角切换章节
- 新角色/新势力登场前
```

##### Step 2: 规划卷间钩子链

```markdown
## 钩子链规划

### 卷间钩子（最重要）

| 卷末章节 | 钩子类型 | 强度 | 内容概要 | 下卷开头如何兑现 |
|---------|---------|------|---------|---------------|
| 第 30 章（卷 1 末） | 反转 | ⭐⭐⭐⭐⭐ | [描述] | 第 31 章开头揭示 |
| 第 60 章（卷 2 末） | 悬念 | ⭐⭐⭐⭐ | [描述] | 第 61 章开头回应 |
| ... | ... | ... | ... | ... |

### 主线钩子链

[描述贯穿全书的主要悬念线如何通过钩子链推进]

1. 第 [N] 章：埋设主线悬念 →
2. 第 [M] 章：提供部分线索 →
3. 第 [K] 章：误导性揭示 →
4. 第 [L] 章：真相大白
```

##### Step 3: 写入 creative-plan.md

将爽点分布和钩子链规划写入 `creative-plan.md` 的对应章节。
```

**Step 2: Commit**

```bash
git add templates/commands/plan.md
git commit -m "feat(plan): add hook chain design planning (2.2.3)"
```

---

### Task 10.3: 验证与现有规划流程的兼容性

**Step 1: 确认章节编号连续**

Run: `grep -n "#### 2\." templates/commands/plan.md`
Expected: 2.1 → 2.2 → 2.2.1 → 2.2.2 → 2.2.3 → 2.3，顺序正确

**Step 2: 确认 hook-design.md 引用正确**

Run: `grep -n "hook-design.md" templates/commands/plan.md`
Expected: 在 2.2.3 中引用了 `templates/knowledge-base/craft/hook-design.md`

**Step 3: 最终 Commit**

```bash
git log --oneline -3
```
Expected: 看到 2 个相关 commit
