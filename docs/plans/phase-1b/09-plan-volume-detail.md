# Task 9: `/plan --detail vol-XX` å·çº§è§„åˆ’èƒ½åŠ›

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** åœ¨ `/plan` å‘½ä»¤ä¸­å¢å¼ºå·çº§è§„åˆ’èƒ½åŠ›ï¼Œæ”¯æŒ `--detail vol-01` å‚æ•°ï¼Œç”Ÿæˆå•å·çš„è¯¦ç»†ç« èŠ‚è§„åˆ’ï¼ˆå«æ¯ç« ç›®æ ‡ã€çˆ½ç‚¹ã€é’©å­ã€å­—æ•°é¢„ä¼°ï¼‰

**Architecture:** åœ¨ `plan.md` çš„ç« èŠ‚æ¶æ„è®¾è®¡éƒ¨åˆ†ï¼ˆ2.2ï¼‰ä¹‹åæ’å…¥æ–°çš„ã€Œå·çº§è¯¦ç»†è§„åˆ’ã€ç« èŠ‚ã€‚å½“æ£€æµ‹åˆ° `--detail vol-XX` å‚æ•°æ—¶ï¼Œè·³è¿‡å…¨ä¹¦æ¦‚è§ˆï¼Œç›´æ¥è¿›å…¥å•å·çš„é€ç« è§„åˆ’æ¨¡å¼ã€‚

**Tech Stack:** Markdown æ¨¡æ¿

---

### Task 9.1: æ›´æ–° frontmatter å‚æ•°æç¤º

**Files:**
- Modify: `templates/commands/plan.md:1-8`

**Step 1: ä¿®æ”¹ argument-hint**

å°† `plan.md` çš„ frontmatter ä¸­ï¼š
```yaml
argument-hint: [æ•…äº‹ç›®å½•å]
```

æ”¹ä¸ºï¼š
```yaml
argument-hint: [æ•…äº‹ç›®å½•å] [--detail vol-XX]
```

**Step 2: Commit**

```bash
git add templates/commands/plan.md
git commit -m "feat(plan): add --detail vol-XX to argument-hint"
```

---

### Task 9.2: åœ¨å†³ç­–é€»è¾‘ä¸­æ·»åŠ å·çº§è§„åˆ’åˆ†æ”¯

**Files:**
- Modify: `templates/commands/plan.md:15-30`ï¼ˆå†³ç­–é€»è¾‘éƒ¨åˆ†ï¼‰

**Step 1: åœ¨ç°æœ‰å†³ç­–é€»è¾‘ä¸­æ·»åŠ  --detail æ£€æµ‹**

åœ¨ `plan.md` çš„æ‰§è¡Œæµç¨‹å¼€å¤´ï¼ˆçº¦ç¬¬ 15-30 è¡Œçš„å‚æ•°è§£æéƒ¨åˆ†ï¼‰ï¼Œæ·»åŠ ï¼š

```markdown
### å‚æ•°è§£æ

1. **æ•…äº‹ç›®å½•å**ï¼šä» `$ARGUMENTS` ä¸­æå–æ•…äº‹ç›®å½•å
2. **å·çº§è¯¦ç»†è§„åˆ’**ï¼šæ£€æŸ¥ `$ARGUMENTS` æ˜¯å¦åŒ…å« `--detail vol-XX`
   - å¦‚æœåŒ…å« â†’ è·³è½¬åˆ°ã€Œå·çº§è¯¦ç»†è§„åˆ’ã€ç« èŠ‚
   - å¦‚æœä¸åŒ…å« â†’ æ‰§è¡Œæ­£å¸¸çš„å…¨ä¹¦è§„åˆ’æµç¨‹
```

**Step 2: Commit**

```bash
git add templates/commands/plan.md
git commit -m "feat(plan): add --detail vol-XX parameter detection in decision logic"
```

---

### Task 9.3: æ’å…¥ã€Œå·çº§è¯¦ç»†è§„åˆ’ã€ç« èŠ‚

**Files:**
- Modify: `templates/commands/plan.md`ï¼ˆåœ¨ç« èŠ‚æ¶æ„è®¾è®¡ 2.2 ä¹‹åã€2.3 ä¹‹å‰æ’å…¥ï¼‰

**Step 1: åœ¨ç¬¬ 2.2 èŠ‚ä¹‹åæ’å…¥æ–°ç« èŠ‚**

åœ¨ `plan.md` çš„ `#### 2.2 ç« èŠ‚æ¶æ„è®¾è®¡` ç»“æŸåã€`#### 2.3` ä¹‹å‰ï¼Œæ’å…¥ï¼š

```markdown

#### 2.2.1 å·çº§è¯¦ç»†è§„åˆ’ï¼ˆ`--detail vol-XX`ï¼‰

**è§¦å‘æ¡ä»¶**ï¼š`$ARGUMENTS` åŒ…å« `--detail vol-XX`ï¼ˆå¦‚ `--detail vol-01`ï¼‰

**å‰ç½®æ¡ä»¶**ï¼š
1. å¿…é¡»å·²æœ‰ `creative-plan.md`ï¼ˆå…¨ä¹¦è§„åˆ’ï¼‰ï¼Œå¦‚æ²¡æœ‰åˆ™æç¤ºå…ˆæ‰§è¡Œ `/plan`
2. ä» `creative-plan.md` ä¸­è¯»å–ç›®æ ‡å·çš„æ¦‚è¦ä¿¡æ¯ï¼ˆå·ä¸»é¢˜ã€èµ·æ­¢ç« èŠ‚ã€æ ¸å¿ƒå†²çªï¼‰

**å·çº§è§„åˆ’æµç¨‹**ï¼š

##### Step 1: å·æ¦‚è¦ç¡®è®¤

ä» `creative-plan.md` ä¸­æå–ç›®æ ‡å·çš„ä¿¡æ¯ï¼Œå‘ç”¨æˆ·ç¡®è®¤ï¼š

```
ğŸ“– å·çº§è¯¦ç»†è§„åˆ’ï¼šç¬¬ [X] å· â€” [å·å]
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ å·ä¸»é¢˜ï¼š[ä» creative-plan.md æå–]
ğŸ“Š ç« èŠ‚èŒƒå›´ï¼šç¬¬ [A]-[B] ç« ï¼ˆå…± [N] ç« ï¼‰
âš¡ æ ¸å¿ƒå†²çªï¼š[ä» creative-plan.md æå–]
ğŸ¯ å·ç›®æ ‡ï¼š[æœ¬å·ç»“æŸæ—¶è¦è¾¾åˆ°çš„çŠ¶æ€]

ç¡®è®¤ä»¥ä¸Šä¿¡æ¯æ­£ç¡®ï¼Ÿå¦‚éœ€è°ƒæ•´è¯·è¯´æ˜ã€‚
```

##### Step 2: é€ç« è§„åˆ’

ä¸ºæœ¬å·çš„æ¯ä¸€ç« ç”Ÿæˆè¯¦ç»†è§„åˆ’ï¼š

```markdown
### ç¬¬ [N] ç« ï¼š[ç« èŠ‚æ ‡é¢˜]

**ç« èŠ‚å®šä½**ï¼š[å¼€ç¯‡/å‘å±•/è½¬æŠ˜/é«˜æ½®/è¿‡æ¸¡/æ”¶æŸ]
**å­—æ•°é¢„ä¼°**ï¼š[2000-4000 å­—]

**æœ¬ç« ç›®æ ‡**ï¼š
1. [æƒ…èŠ‚ç›®æ ‡ï¼šæ¨è¿›ä»€ä¹ˆæƒ…èŠ‚çº¿]
2. [è§’è‰²ç›®æ ‡ï¼šå±•ç¤º/å‘å±•ä»€ä¹ˆè§’è‰²]
3. [ä¿¡æ¯ç›®æ ‡ï¼šé‡Šæ”¾ä»€ä¹ˆä¿¡æ¯ç»™è¯»è€…]

**åœºæ™¯è§„åˆ’**ï¼š
- åœºæ™¯ 1ï¼š[åœ°ç‚¹] â€” [äº‹ä»¶æ¦‚è¦]ï¼ˆçº¦ [X] å­—ï¼‰
- åœºæ™¯ 2ï¼š[åœ°ç‚¹] â€” [äº‹ä»¶æ¦‚è¦]ï¼ˆçº¦ [X] å­—ï¼‰

**åœ¨åœºè§’è‰²**ï¼š[è§’è‰²åˆ—è¡¨]

**çˆ½ç‚¹è®¾è®¡**ï¼š
- [çˆ½ç‚¹ç±»å‹]ï¼š[å…·ä½“æè¿°]ï¼ˆå¼ºåº¦ï¼šâ­â­â­ï¼‰
- å¦‚æ— çˆ½ç‚¹ï¼šæ ‡æ³¨ã€Œè¿‡æ¸¡ç« ï¼Œæ— ä¸»è¦çˆ½ç‚¹ã€

**é’©å­è®¾è®¡**ï¼š
- ç±»å‹ï¼š[æ‚¬å¿µ/åè½¬/ä¿¡æ¯/æƒ…æ„Ÿ/æ—¶é—´å‹åŠ›/é€‰æ‹©]
- å†…å®¹ï¼š[é’©å­å…·ä½“å†…å®¹]
- å¼ºåº¦ï¼š[â­-â­â­â­â­â­]
- å…‘ç°è®¡åˆ’ï¼šç¬¬ [M] ç« 

**ä¼ç¬”æ“ä½œ**ï¼š
- åŸ‹è®¾ï¼š[æ–°ä¼ç¬”æè¿°]ï¼ˆé¢„è®¡ç¬¬ [M] ç« å›æ”¶ï¼‰
- æ¨è¿›ï¼š[å·²æœ‰ä¼ç¬”] â†’ [æœ¬ç« æ¨è¿›æ–¹å¼]
- å›æ”¶ï¼š[å·²æœ‰ä¼ç¬”] â†’ [æœ¬ç« å›æ”¶æ–¹å¼]

**æƒ…ç»ªèŠ‚å¥**ï¼š[é«˜/ä¸­/ä½]
**ä¸ä¸Šä¸€ç« çš„è¡”æ¥**ï¼š[å¦‚ä½•æ‰¿æ¥ä¸Šä¸€ç« ç»“å°¾]
```

##### Step 3: å·çº§èŠ‚å¥æ€»è§ˆ

è§„åˆ’å®Œæ‰€æœ‰ç« èŠ‚åï¼Œè¾“å‡ºèŠ‚å¥æ€»è§ˆï¼š

```
ğŸ“Š ç¬¬ [X] å·èŠ‚å¥æ€»è§ˆ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

æƒ…ç»ªæ›²çº¿ï¼š
ç¬¬ 1 ç«  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ ä¸­
ç¬¬ 2 ç«  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ ä¸­é«˜
ç¬¬ 3 ç«  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ é«˜
ç¬¬ 4 ç«  â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘ ä½ï¼ˆè¿‡æ¸¡ï¼‰
ç¬¬ 5 ç«  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘ ä¸­
ç¬¬ 6 ç«  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ é«˜æ½®
...

çˆ½ç‚¹åˆ†å¸ƒï¼š
ç¬¬ 1 ç«  â­â­ é€†è¢­
ç¬¬ 3 ç«  â­â­â­ æ‰“è„¸
ç¬¬ 5 ç«  â­â­â­â­ å‡çº§
ç¬¬ 6 ç«  â­â­â­â­â­ å¤§åè½¬

é’©å­é“¾ï¼š
ç¬¬ 1 ç«  â†’ æ‚¬å¿µ â­â­â­ â†’ ç¬¬ 2 ç« å…‘ç°
ç¬¬ 2 ç«  â†’ ä¿¡æ¯ â­â­ â†’ ç¬¬ 3 ç« å…‘ç°
ç¬¬ 3 ç«  â†’ åè½¬ â­â­â­â­ â†’ ç¬¬ 5 ç« å…‘ç°ï¼ˆè·¨ç« ï¼‰
...

âš ï¸ èŠ‚å¥è­¦å‘Šï¼š
- ç¬¬ 4-5 ç« è¿ç»­ä¸­ä½èŠ‚å¥ï¼Œè€ƒè™‘åœ¨ç¬¬ 4 ç« æœ«å°¾åŠ å¼ºé’©å­
- ç¬¬ 6 ç« é«˜æ½®åå»ºè®®ç¬¬ 7 ç« é€‚å½“æ”¾ç¼“
```

##### Step 4: å†™å…¥ creative-plan.md

å°†å·çº§è¯¦ç»†è§„åˆ’è¿½åŠ åˆ° `creative-plan.md` çš„å¯¹åº”å·ç« èŠ‚ä¸­ï¼Œæˆ–åˆ›å»ºç‹¬ç«‹çš„ `vol-XX-detail.md` æ–‡ä»¶ã€‚

**å†™å…¥ç­–ç•¥**ï¼š
- å¦‚æœ `creative-plan.md` ä¸­å·²æœ‰è¯¥å·çš„è¯¦ç»†è§„åˆ’ â†’ è¯¢é—®æ˜¯å¦è¦†ç›–
- å¦‚æœ `creative-plan.md` è¿‡é•¿ï¼ˆ> 500 è¡Œï¼‰â†’ åˆ›å»º `stories/*/spec/vol-XX-detail.md`
- å¦åˆ™ â†’ è¿½åŠ åˆ° `creative-plan.md` çš„å¯¹åº”ä½ç½®

##### Step 5: ç”Ÿæˆ tasks.md æ¡ç›®

åŸºäºå·çº§è§„åˆ’ï¼Œè‡ªåŠ¨ç”Ÿæˆ `tasks.md` ä¸­çš„å†™ä½œä»»åŠ¡ï¼š

```markdown
## ç¬¬ [X] å·å†™ä½œä»»åŠ¡

- [ ] ç¬¬ [A] ç« ï¼š[ç« èŠ‚æ ‡é¢˜] â€” [ä¸€å¥è¯ç›®æ ‡]
- [ ] ç¬¬ [A+1] ç« ï¼š[ç« èŠ‚æ ‡é¢˜] â€” [ä¸€å¥è¯ç›®æ ‡]
...
- [ ] ç¬¬ [B] ç« ï¼š[ç« èŠ‚æ ‡é¢˜] â€” [ä¸€å¥è¯ç›®æ ‡]
```
```

**Step 2: éªŒè¯æ’å…¥ä½ç½®**

Run: `grep -n "2.2 ç« èŠ‚æ¶æ„\|2.2.1 å·çº§\|2.3" templates/commands/plan.md`
Expected: 2.2 â†’ 2.2.1ï¼ˆæ–°å¢ï¼‰â†’ 2.3ï¼Œé¡ºåºæ­£ç¡®

**Step 3: Commit**

```bash
git add templates/commands/plan.md
git commit -m "feat(plan): add --detail vol-XX for per-volume chapter-by-chapter planning with hooks, satisfaction points, and pacing overview"
```

---

### Task 9.4: éªŒè¯ä¸ç°æœ‰è§„åˆ’æµç¨‹çš„å…¼å®¹æ€§

**Step 1: ç¡®è®¤æ­£å¸¸æ¨¡å¼ä¸å—å½±å“**

ä¸å¸¦ `--detail` å‚æ•°æ—¶ï¼Œ`/plan` ä»æ‰§è¡ŒåŸæœ‰çš„å…¨ä¹¦è§„åˆ’æµç¨‹ã€‚

**Step 2: ç¡®è®¤ä¸ /tasks çš„è¡”æ¥**

å·çº§è§„åˆ’ç”Ÿæˆçš„ tasks.md æ¡ç›®æ ¼å¼ä¸ `/tasks` å‘½ä»¤å…¼å®¹ã€‚

**Step 3: æœ€ç»ˆéªŒè¯**

```bash
git log --oneline -4
```
Expected: çœ‹åˆ° 3 ä¸ªç›¸å…³ commit
