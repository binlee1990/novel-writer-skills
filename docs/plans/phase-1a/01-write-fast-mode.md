# Task 1: `/write --fast` å¿«å†™æ¨¡å¼

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** åœ¨ `/write` å‘½ä»¤ä¸­æ–°å¢ `--fast` æ¨¡å¼ï¼Œè·³è¿‡å¤§éƒ¨åˆ†å‰ç½®æ£€æŸ¥ï¼Œä»…åŠ è½½æœ€å°å¿…è¦ä¸Šä¸‹æ–‡åç›´æ¥å¼€å†™

**Architecture:** åœ¨ `write.md` çš„ frontmatter ä¸­æ›´æ–° `argument-hint`ï¼Œåœ¨å†™ä½œæ‰§è¡Œæµç¨‹ä¹‹å‰æ’å…¥å¿«å†™æ¨¡å¼åˆ†æ”¯ã€‚å¿«å†™æ¨¡å¼ä»…åŠ è½½ 3 é¡¹æ ¸å¿ƒèµ„æºï¼ˆä¸Šä¸€ç« å†…å®¹ + è§’è‰²çŠ¶æ€ + å½“å‰ä»»åŠ¡ï¼‰ï¼Œè·³è¿‡ä¸‰å±‚èµ„æºåŠ è½½æœºåˆ¶å’Œå¤§éƒ¨åˆ†å‰ç½®æ£€æŸ¥ï¼Œä½†å†™å®Œåä»æ‰§è¡Œå®Œæ•´çš„åç½®å¤„ç†ï¼ˆtracking æ›´æ–°ï¼‰ã€‚

**Tech Stack:** Markdown æ¨¡æ¿

---

### Task 1.1: æ›´æ–° frontmatter å‚æ•°æç¤º

**Files:**
- Modify: `templates/commands/write.md:1-9`

**Step 1: ä¿®æ”¹ argument-hint**

å°† `write.md` ç¬¬ 3 è¡Œï¼š
```yaml
argument-hint: [ç« èŠ‚ç¼–å·æˆ–ä»»åŠ¡ID]
```

æ”¹ä¸ºï¼š
```yaml
argument-hint: [ç« èŠ‚ç¼–å·æˆ–ä»»åŠ¡ID] [--fast]
```

**Step 2: éªŒè¯ä¿®æ”¹**

Run: `head -10 templates/commands/write.md`
Expected: ç¬¬ 3 è¡Œæ˜¾ç¤º `argument-hint: [ç« èŠ‚ç¼–å·æˆ–ä»»åŠ¡ID] [--fast]`

**Step 3: Commit**

```bash
git add templates/commands/write.md
git commit -m "feat(write): add --fast flag to argument-hint"
```

---

### Task 1.2: æ’å…¥å¿«å†™æ¨¡å¼åˆ†æ”¯é€»è¾‘

**Files:**
- Modify: `templates/commands/write.md:646-647`ï¼ˆåœ¨ `<!-- PLUGIN_HOOK -->` ä¹‹åã€`## å†™ä½œæ‰§è¡Œæµç¨‹` ä¹‹å‰ï¼‰

**Step 1: åœ¨ç¬¬ 646 è¡Œï¼ˆ`<!-- PLUGIN_HOOK -->` å—ç»“æŸåï¼‰å’Œç¬¬ 647 è¡Œï¼ˆ`## å†™ä½œæ‰§è¡Œæµç¨‹`ï¼‰ä¹‹é—´æ’å…¥å¿«å†™æ¨¡å¼ç« èŠ‚**

åœ¨ `write.md` çš„ç¬¬ 646 è¡Œä¹‹åã€ç¬¬ 647 è¡Œ `## å†™ä½œæ‰§è¡Œæµç¨‹` ä¹‹å‰ï¼Œæ’å…¥ä»¥ä¸‹å†…å®¹ï¼š

```markdown

---

## ğŸš€ å¿«å†™æ¨¡å¼ï¼ˆ`--fast`ï¼‰

**è§¦å‘æ¡ä»¶**ï¼šç”¨æˆ·å‚æ•° `$ARGUMENTS` åŒ…å« `--fast`

**é€‚ç”¨åœºæ™¯**ï¼š
- çµæ„Ÿçˆ†å‘ï¼Œæƒ³å¿«é€Ÿå¼€å†™
- çŸ­æš‚ç¦»å¼€åç»­å†™ï¼Œä¸éœ€è¦å®Œæ•´ä¸Šä¸‹æ–‡é‡å»º
- å·²ç»å¾ˆç†Ÿæ‚‰å½“å‰å‰§æƒ…ï¼Œä¸éœ€è¦æé†’

**å¿«å†™æ¨¡å¼æµç¨‹**ï¼š

### Fast-1. æœ€å°èµ„æºåŠ è½½

**ä»…åŠ è½½ä»¥ä¸‹ 3 é¡¹**ï¼ˆè·³è¿‡ä¸‰å±‚èµ„æºåŠ è½½æœºåˆ¶å’ŒæŸ¥è¯¢åè®®ï¼‰ï¼š

1. **å½“å‰ä»»åŠ¡**ï¼šè¯»å– `stories/*/tasks.md`ï¼Œæ‰¾åˆ°å½“å‰ `pending` æˆ– `in_progress` çš„å†™ä½œä»»åŠ¡
2. **ä¸Šä¸€ç« å†…å®¹**ï¼šè¯»å–æœ€è¿‘å®Œæˆçš„ç« èŠ‚æ–‡ä»¶ï¼ˆæœ€å 500 å­—å³å¯ï¼‰
3. **è§’è‰²çŠ¶æ€**ï¼šè¯»å– `stories/*/spec/tracking/character-state.json`ï¼ˆä»…å½“å‰æ´»è·ƒè§’è‰²ï¼‰

**ä¸åŠ è½½**ï¼š
- âŒ å®ªæ³•æ–‡ä»¶
- âŒ è§„æ ¼æ–‡ä»¶
- âŒ åˆ›ä½œè®¡åˆ’
- âŒ knowledge-base èµ„æº
- âŒ skills èµ„æº
- âŒ å…³ç³»ç½‘ç»œ
- âŒ æ—¶é—´çº¿
- âŒ æƒ…èŠ‚è¿½è¸ª

### Fast-2. æç®€å†™ä½œæé†’

è¾“å‡ºä¸€ä¸ªç®€çŸ­çš„å†™ä½œæé†’å¡ç‰‡ï¼š

```
ğŸ“ å¿«å†™æ¨¡å¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ ä»»åŠ¡ï¼š[ä» tasks.md æå–çš„å½“å‰ä»»åŠ¡æ ‡é¢˜]
ğŸ“– ä¸Šç« ç»“å°¾ï¼š[æœ€åä¸€æ®µçš„ä¸€å¥è¯æ¦‚æ‹¬]
ğŸ‘¤ åœ¨åœºè§’è‰²ï¼š[ä» character-state.json æå–]
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš¡ ç›´æ¥å¼€å§‹å†™ä½œï¼Œè·³è¿‡è¯¦ç»†æ£€æŸ¥
ğŸ’¡ å¦‚éœ€å®Œæ•´ä¸Šä¸‹æ–‡ï¼Œè¯·ä½¿ç”¨ /writeï¼ˆä¸å¸¦ --fastï¼‰
```

### Fast-3. ç›´æ¥è¿›å…¥å†™ä½œ

è·³è¿‡ã€Œå†™ä½œå‰æé†’ã€ã€Œåˆ†æ®µæ ¼å¼è§„èŒƒã€ç­‰è¯¦ç»†æé†’ï¼Œç›´æ¥è¿›å…¥å†…å®¹åˆ›ä½œã€‚

**ä½†ä»ç„¶éµå®ˆ**ï¼š
- âœ… æ®µè½ç»“æ„è§„èŒƒï¼ˆå•å¥æˆæ®µ 30%-50%ï¼Œæ¯æ®µ 50-100 å­—ï¼‰
- âœ… å AI è§„èŒƒï¼ˆç¦ç”¨è¯ã€æ›¿æ¢ç­–ç•¥ï¼‰
- âœ… è‡ªç„¶åŒ–å†™ä½œåŸåˆ™

### Fast-4. å®Œæ•´åç½®å¤„ç†

å†™ä½œå®Œæˆåï¼Œ**ä»ç„¶æ‰§è¡Œå®Œæ•´çš„åç½®å¤„ç†**ï¼ˆä¸æ­£å¸¸æ¨¡å¼ç›¸åŒï¼‰ï¼š
- âœ… å­—æ•°éªŒè¯
- âœ… è¿›åº¦æ›´æ–°
- âœ… è‡ªåŠ¨ Tracking æ›´æ–°ï¼ˆcharacter-state.json, relationships.json, plot-tracker.json, timeline.jsonï¼‰
- âœ… ä¸‹ä¸€æ­¥å»ºè®®

---

> âš ï¸ **ä»¥ä¸‹ä¸ºæ­£å¸¸æ¨¡å¼æµç¨‹**ï¼ˆ`--fast` æ¨¡å¼è·³è¿‡ä»¥ä¸‹å†…å®¹ï¼Œç›´æ¥æ‰§è¡Œ Fast-1 åˆ° Fast-4ï¼‰

```

**Step 2: éªŒè¯æ’å…¥ä½ç½®**

Run: `grep -n "å¿«å†™æ¨¡å¼\|å†™ä½œæ‰§è¡Œæµç¨‹\|PLUGIN_HOOK" templates/commands/write.md`
Expected:
- `PLUGIN_HOOK` åœ¨å¿«å†™æ¨¡å¼ä¹‹å‰
- `å¿«å†™æ¨¡å¼` ç« èŠ‚åœ¨ä¸­é—´
- `å†™ä½œæ‰§è¡Œæµç¨‹` åœ¨å¿«å†™æ¨¡å¼ä¹‹å

**Step 3: éªŒè¯æ–‡ä»¶å®Œæ•´æ€§**

Run: `wc -l templates/commands/write.md`
Expected: è¡Œæ•°çº¦ä¸º 1264 + ~70 = ~1334 è¡Œï¼ˆåŸæ–‡ä»¶ 1264 è¡Œ + æ–°å¢çº¦ 70 è¡Œï¼‰

**Step 4: Commit**

```bash
git add templates/commands/write.md
git commit -m "feat(write): add --fast mode for quick writing with minimal context loading"
```

---

### Task 1.3: éªŒè¯å¿«å†™æ¨¡å¼ä¸æ­£å¸¸æ¨¡å¼çš„å…¼å®¹æ€§

**Step 1: æ£€æŸ¥æ­£å¸¸æ¨¡å¼æµç¨‹ä¸å—å½±å“**

æ‰‹åŠ¨æ£€æŸ¥ `write.md` ç¡®è®¤ï¼š
1. ä¸å¸¦ `--fast` å‚æ•°æ—¶ï¼Œæµç¨‹ä»ã€Œå‰ç½®æ£€æŸ¥ã€å¼€å§‹ï¼Œç»è¿‡å®Œæ•´çš„ä¸‰å±‚èµ„æºåŠ è½½
2. å¸¦ `--fast` å‚æ•°æ—¶ï¼Œæµç¨‹ä»ã€Œå¿«å†™æ¨¡å¼ã€å¼€å§‹ï¼Œä»…åŠ è½½ 3 é¡¹èµ„æº
3. ä¸¤ç§æ¨¡å¼æœ€ç»ˆéƒ½è¿›å…¥ç›¸åŒçš„åç½®å¤„ç†æµç¨‹

**Step 2: æ£€æŸ¥ frontmatter çš„ allowed-tools æ˜¯å¦è¶³å¤Ÿ**

ç¡®è®¤ç°æœ‰çš„ `allowed-tools` å·²åŒ…å«å¿«å†™æ¨¡å¼éœ€è¦çš„æ–‡ä»¶è¯»å–æƒé™ï¼š
- `Read(//**)` â€” å·²æœ‰ï¼Œå¯è¯»å– tasks.mdã€ç« èŠ‚æ–‡ä»¶ã€character-state.json
- `Write(//stories/**/content/**)` â€” å·²æœ‰ï¼Œå¯å†™å…¥ç« èŠ‚å†…å®¹

Expected: æ— éœ€ä¿®æ”¹ allowed-tools

**Step 3: æœ€ç»ˆéªŒè¯ Commit**

```bash
git log --oneline -3
```
Expected: çœ‹åˆ° 2 ä¸ªç›¸å…³ commit
