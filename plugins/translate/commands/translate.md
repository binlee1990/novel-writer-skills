---
title: 小说翻译 - /translate
description: 翻译章节或全书，保持文学性与术语一致性
---

# 小说翻译

## 使用方法

```bash
/translate [选项] [文件/范围]
```

### 基本用法

```bash
/translate --to en chapter-01.md        # 翻译单章为英文
/translate --to en --all                # 翻译全书为英文
/translate --to ja --chapters 1-10      # 翻译第 1-10 章为日文
```

### 选项

| 选项 | 说明 | 默认值 |
|------|------|--------|
| `--from <语言>` | 源语言 | 自动检测 |
| `--to <语言>` | 目标语言（必需） | - |
| `--all` | 翻译全书 | false |
| `--chapters <范围>` | 章节范围（如 `1-10`） | - |
| `--style <风格>` | 翻译风格 | literary |
| `--glossary <文件>` | 指定术语表 | .specify/translation/glossary.json |
| `--skip-existing` | 跳过已翻译章节 | false |

### 语言代码

| 代码 | 语言 | 说明 |
|------|------|------|
| `zh` | 中文（简体） | 默认源语言 |
| `en` | 英文 | 网文出海首选 |
| `ja` | 日文 | 轻小说市场 |

### 翻译风格

| 风格 | 说明 | 适用场景 |
|------|------|---------|
| `literary`（默认） | 文学性翻译，保持意境和节奏 | 严肃文学、文青向网文 |
| `casual` | 口语化翻译，通俗易懂 | 爽文、轻小说 |
| `formal` | 正式翻译，庄重典雅 | 历史、武侠 |

---

## 功能详解

### 1. 智能分段翻译

将长文本按段落分组，每组 ~2000 字，附带上下文：

```
[前文上下文 200 字（已翻译版本）]
---
[待翻译段落组 ~2000 字]
---
[后文预览 200 字（原文）]
+ [术语表]
```

**优势：**
- 避免超长输入导致质量下降
- 保持上下文连贯
- 术语实时提醒

### 2. 术语自动应用

**翻译前：**
1. 读取 `.specify/translation/glossary.json`
2. 扫描原文，标记所有术语出现位置
3. 将术语替换为带标注的占位符

**翻译中：**
- AI 翻译时看到占位符和标准译名
- 确保译名一致

**翻译后：**
1. 验证所有术语已正确应用
2. 检测原文中未在术语表的专有名词
3. 提示添加新术语

### 3. 两遍翻译策略

**第一遍 - 直译（准确性优先）：**
```
Focus: 确保信息完整传达
允许: 略显生硬的表达
目标: 不遗漏任何信息
```

**第二遍 - 润色（流畅性优先）：**
```
Focus: 让目标语母语者读起来自然
调整: 句式重组、词汇润色
目标: 流畅自然的文学翻译
```

**对比检查：**
```
逐段对比初译和润色版：
- 关键信息是否保留？
- 情感基调是否一致？
- 角色语气是否匹配？
```

### 4. 文化适应处理

| 类型 | 原文 | 直译 | 文化适应 |
|------|------|------|---------|
| 成语 | 三十六计走为上计 | Thirty-six stratagems, fleeing is best | He chose discretion over valor |
| 典故 | 司马昭之心 | Sima Zhao's heart | An open secret / obvious intentions |
| 称呼 | 师父 | Master (martial arts context) | 保留 "Shifu" 或用 "Master" |
| 度量 | 三尺 | Three chi | About three feet |
| 诗词 | 举头望明月 | Raise head gaze bright moon | I lift my gaze to the bright moon |

**处理策略：**
- **成语/俗语：** 寻找目标语对等表达，无对等则意译
- **称呼：** 保留拼音（如 Shifu）+ 首次出现时注释
- **度量单位：** 转换为目标文化单位
- **诗词：** 保留韵律感的意译，或直译 + 注释
- **专有名词（如功法名）：** 意译为主，首次出现附带拼音

---

## 输出格式

### 目录结构

```
stories/[story-name]/translations/
├── en/
│   ├── content/
│   │   ├── chapter-01.md      # 翻译后的章节
│   │   ├── chapter-02.md
│   │   └── ...
│   ├── glossary-used.json     # 本次使用的术语快照
│   └── translation-report.md  # 翻译报告
└── ja/
    └── ...
```

### 翻译报告

```markdown
# 翻译报告

- 源语言：中文
- 目标语言：英文
- 翻译风格：literary
- 翻译日期：2025-02-09

## 统计

| 指标 | 值 |
|------|---|
| 翻译章节数 | 30 |
| 原文总字数 | 256,000 字 |
| 译文总词数 | 312,000 词 |
| 应用术语数 | 85 个 |
| 新发现术语 | 12 个（待确认） |

## 术语应用情况

| 术语 | 译名 | 出现次数 |
|------|------|---------|
| 李明 | Li Ming | 1,245 |
| 青云宗 | Azure Cloud Sect | 389 |
| ... | ... | ... |

## 注意事项

- 第 5 章有 2 处文化典故需人工确认
- 第 12 章诗词翻译建议人工审阅
- 发现 12 个新专有名词，建议添加到术语表
```

---

## 与其他命令集成

### 与 /write 集成

```
/write 完成第 5 章 →
提示："第 5 章已完成，是否翻译为英文？"
用户确认 → 自动调用 /translate --to en chapter-05.md
```

### 与 /export 集成

```
/export --format epub --lang en
→ 先检查英文版是否存在
→ 不存在则提示先翻译
→ 存在则直接导出英文版 EPUB
```

### 与 /analyze 集成

```
/analyze --translation en
→ 检查翻译质量
→ 术语一致性报告
→ 疑似翻译错误标记
```

---

## 翻译质量保证

### 自动检查项

| 检查项 | 说明 | 处理 |
|--------|------|------|
| 术语一致性 | glossary 中的术语是否 100% 统一 | 错误 → 自动修正 |
| 段落对应 | 原文和译文段落数是否一致 | 警告 → 人工检查 |
| 长度合理性 | 中→英 +20-50%，中→日 -10-20% | 警告 → 可能过度翻译或遗漏 |
| 特殊符号 | 引号、书名号是否正确转换 | 自动修正 |
| 未定义术语 | 是否有专有名词不在 glossary 中 | 提示 → 建议添加 |

### 警告示例

```
✅ 翻译完成！

术语应用：85/85（100%）

⚠️ 警告：
  第 3 章第 12 段：检测到未定义术语"天灵根"（出现 5 次）
    建议：/glossary add "天灵根|Heavenly Spirit Root|天霊根"

  第 7 章：译文长度异常（原文 3200 字，译文 6100 词，+90%）
    可能原因：过度解释
    建议：人工检查润色

  第 15 章第 8 段：检测到诗词内容
    已使用意译策略，建议人工审阅
```

---

## 常见陷阱

### 1. 未初始化术语表就翻译

**症状：** 同一角色名出现多种译法

**解决：** 翻译前先 `/glossary init`，至少添加主要角色和地名

### 2. 过度直译

**症状：** 读起来像机器翻译

**解决：** 使用 `literary` 风格，AI 会自动调整

### 3. 文化误译

**症状：** "三长两短" → "three long two short"

**解决：** AI 会自动识别 idiom 并本地化，复杂情况会标记待人工确认

### 4. 一次翻译太多

**症状：** 翻译质量随文本长度下降

**解决：** 系统自动分段，每段 ~2000 字

---

## 检查清单

### 翻译前

- [ ] 已初始化术语表？（/glossary init）
- [ ] 已添加主要角色名/地名？（/glossary add）
- [ ] 已选择合适的翻译风格？
- [ ] 已用 /translate-preview 预览效果？

### 翻译后

- [ ] 术语一致性 100%？
- [ ] 翻译报告中无严重警告？
- [ ] 关键章节已人工抽查？
- [ ] 新发现术语已添加到 glossary？

---

## 执行流程

当用户调用 `/translate` 命令时，你应该：

### Step 1: 验证参数

1. 检查 `--to` 参数是否提供（必需）
2. 验证语言代码是否支持（zh/en/ja）
3. 确定翻译范围（单章/多章/全书）
4. 确认翻译风格（默认 literary）

### Step 2: 加载术语表

1. 读取 `.specify/translation/glossary.json`
2. 如果不存在，提示用户先运行 `/glossary init`
3. 解析术语表，构建术语映射

### Step 3: 读取源文件

1. 根据参数确定要翻译的文件列表
2. 读取每个文件的内容
3. 检测源语言（如果未指定 `--from`）

### Step 4: 预处理文本

1. 扫描文本，标记所有术语出现位置
2. 将术语替换为占位符（如 `{{CHAR_001}}`）
3. 记录占位符与术语的映射关系

### Step 5: 分段翻译

对每个章节：

1. **分段：** 按段落分组，每组 ~2000 字
2. **附加上下文：**
   - 前 200 字（已翻译部分）
   - 后 200 字（原文预览）
   - 术语表
3. **第一遍翻译（直译）：**
   ```
   你是文学翻译专家。请将以下中文文本翻译为英文。

   翻译要求：
   - 准确传达原文信息，不遗漏任何内容
   - 保持原文的叙述风格和节奏
   - 严格使用术语表中的译名
   - 占位符 {{CHAR_001}} 对应 "李明" → "Li Ming"
   - 占位符 {{PLACE_001}} 对应 "青云宗" → "Azure Cloud Sect"

   上下文（已翻译部分）：
   [前 200 字英文]

   待翻译文本：
   [当前段落组 ~2000 字]

   后文预览（原文）：
   [后 200 字中文]

   请提供准确的直译版本。
   ```

4. **第二遍翻译（润色）：**
   ```
   你是文学翻译专家。请润色以下英文翻译，使其更流畅自然。

   原文（中文）：
   [原文]

   初译（英文）：
   [第一遍翻译结果]

   润色要求：
   - 保持原文信息完整
   - 让英语母语者读起来自然
   - 调整句式，优化词汇
   - 保持文学性和意境
   - 不改变术语译名

   请提供润色后的版本。
   ```

5. **还原术语：** 将占位符替换为标准译名

### Step 6: 质量检查

1. **术语一致性检查：**
   - 验证所有术语是否正确应用
   - 检测是否有术语被错误翻译

2. **段落对应检查：**
   - 原文段落数 vs 译文段落数
   - 如果不一致，标记警告

3. **长度合理性检查：**
   - 计算译文长度增减比例
   - 中→英：+20-50% 正常
   - 中→日：-10-20% 正常
   - 超出范围标记警告

4. **未定义术语检测：**
   - 扫描译文，查找可能的专有名词
   - 检查是否在术语表中
   - 未定义的提示用户添加

### Step 7: 输出结果

1. **保存翻译文件：**
   - 创建 `stories/[story-name]/translations/[lang]/content/`
   - 保存每个章节的翻译

2. **保存术语快照：**
   - 复制当前使用的 glossary.json
   - 保存为 `glossary-used.json`

3. **生成翻译报告：**
   - 统计信息（章节数、字数、术语数）
   - 术语应用情况
   - 警告和注意事项
   - 保存为 `translation-report.md`

4. **显示结果：**
   ```
   ✅ 翻译完成！

   翻译章节：30 章
   原文字数：256,000 字
   译文词数：312,000 词
   术语应用：85/85（100%）

   输出目录：stories/my-novel/translations/en/

   ⚠️ 注意事项：
   - 发现 12 个新专有名词，建议添加到术语表
   - 第 5 章有 2 处文化典故需人工确认

   详细报告：stories/my-novel/translations/en/translation-report.md
   ```

---

## 示例对话

### 示例 1：翻译单章

```
用户：/translate --to en chapter-01.md

助手：
正在翻译 chapter-01.md 为英文...

✅ 加载术语表：85 个术语
✅ 预处理文本：标记 23 个术语
✅ 分段翻译：5 个段落组
✅ 质量检查：通过

翻译完成！

原文：3,245 字
译文：4,012 词（+23.6%）
术语应用：23/23（100%）

输出：stories/my-novel/translations/en/content/chapter-01.md

⚠️ 发现 2 个新专有名词：
  - "天灵根"（出现 3 次）
  - "筑基期"（出现 5 次）

建议添加到术语表：
  /glossary add "天灵根|Heavenly Spirit Root"
  /glossary add "筑基期|Foundation Establishment"
```

### 示例 2：翻译全书

```
用户：/translate --to en --all

助手：
正在翻译全书为英文...

✅ 加载术语表：85 个术语
✅ 扫描章节：30 章

翻译进度：
[████████████████████] 30/30 章（100%）

✅ 翻译完成！

翻译章节：30 章
原文字数：256,000 字
译文词数：312,000 词（+21.9%）
术语应用：85/85（100%）

输出目录：stories/my-novel/translations/en/

⚠️ 注意事项：
- 发现 12 个新专有名词，建议添加到术语表
- 第 5 章有 2 处文化典故需人工确认
- 第 12 章诗词翻译建议人工审阅

详细报告：stories/my-novel/translations/en/translation-report.md
```

### 示例 3：术语表未初始化

```
用户：/translate --to en chapter-01.md

助手：
❌ 错误：术语表未初始化

请先运行以下命令初始化术语表：
  /glossary init

然后添加主要角色名和地名：
  /glossary add "角色:李明|Li Ming"
  /glossary add "地名:青云宗|Azure Cloud Sect"

初始化完成后再运行翻译命令。
```

---

## 技术实现细节

### 术语占位符格式

```
{{CATEGORY_ID}}

示例：
{{CHAR_001}}  - 角色 ID 001
{{PLACE_001}} - 地名 ID 001
{{SKILL_001}} - 功法 ID 001
```

### 上下文窗口

```
前文上下文：200 字（已翻译版本）
当前段落：~2000 字
后文预览：200 字（原文）

总计：~2400 字 + 术语表
```

### 翻译提示词模板

**第一遍（直译）：**
```
你是专业的文学翻译专家，精通{source_lang}到{target_lang}的翻译。

任务：将以下文本从{source_lang}翻译为{target_lang}。

翻译要求：
1. 准确传达原文信息，不遗漏任何内容
2. 保持原文的叙述风格和节奏
3. 严格使用以下术语表中的译名
4. 保持段落结构不变

术语表：
{glossary_list}

上下文（已翻译部分）：
{previous_context}

待翻译文本：
{current_text}

后文预览（原文）：
{next_preview}

请提供准确的翻译。
```

**第二遍（润色）：**
```
你是专业的文学翻译专家。请润色以下{target_lang}翻译，使其更流畅自然。

原文（{source_lang}）：
{original_text}

初译（{target_lang}）：
{first_translation}

润色要求：
1. 保持原文信息完整，不增删内容
2. 让{target_lang}母语者读起来自然流畅
3. 调整句式，优化词汇选择
4. 保持文学性和意境
5. 不改变术语译名
6. 翻译风格：{style}（literary/casual/formal）

请提供润色后的版本。
```

---

## 性能优化

### 批量翻译优化

- 并行处理多个章节（最多 3 个同时）
- 缓存术语表，避免重复读取
- 复用上下文，减少重复计算

### 增量翻译

- 使用 `--skip-existing` 跳过已翻译章节
- 检测文件修改时间，只翻译更新的章节
- 保存翻译历史，支持回滚

---

## 错误处理

### 常见错误

| 错误 | 原因 | 解决方案 |
|------|------|---------|
| 术语表未初始化 | glossary.json 不存在 | 运行 /glossary init |
| 文件不存在 | 指定的章节文件找不到 | 检查文件路径 |
| 语言不支持 | 使用了不支持的语言代码 | 使用 zh/en/ja |
| 翻译超时 | 文本过长或网络问题 | 重试或分段翻译 |

---

## 最佳实践

1. **翻译前准备：**
   - 初始化术语表
   - 添加所有主要角色名、地名
   - 用 /translate-preview 预览风格

2. **分批翻译：**
   - 先翻译 1-2 章测试效果
   - 确认满意后再翻译全书

3. **人工审阅：**
   - 重点章节人工抽查
   - 文化典故、诗词部分重点审阅
   - 对话部分检查角色声音

4. **持续优化：**
   - 发现新术语及时添加
   - 根据反馈调整翻译风格
   - 定期更新术语表

---

## 相关命令

- `/glossary` - 管理术语表
- `/translate-preview` - 预览翻译效果
- `/export` - 导出翻译版本
- `/analyze` - 分析翻译质量
