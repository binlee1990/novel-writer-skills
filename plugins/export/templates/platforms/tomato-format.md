# 番茄小说格式规范

## 概述

番茄小说（Tomato Novel）是字节跳动旗下的免费小说平台。本文档定义了从 Markdown 转换为番茄格式的规则。

---

## 转换规则

### 1. 章节标题

```
原始 Markdown：# 开端
转换结果：1. 开端

原始 Markdown：# 转折
转换结果：2. 转折
```

**规则：**
- `# 标题` -> `X. 标题`
- 使用阿拉伯数字编号
- 标题独占一行

### 2. 正文格式

**段落处理：**
- 段落之间空一行
- 段落开头不缩进（番茄 App 自动处理缩进）
- 去除所有 Markdown 格式标记

**格式标记去除：**

| Markdown | 转换结果 |
|----------|---------|
| `**粗体**` | 粗体 |
| `*斜体*` | 斜体 |
| `> 引用` | 引用内容 |
| 其他标记 | 纯文本 |

### 3. 引号

- 保持中文引号 `""` `''`
- 不转换为直角引号

### 4. 场景分隔

```
原始：---  或  ***
转换：（空行 + 空行，即两个空行）
```

### 5. 编码和输出

- 编码：UTF-8（无 BOM）
- 输出：每章独立 TXT 文件
- 文件名：`{序号}-{标题}.txt`（如 `001-开端.txt`）
- 换行符：`\r\n`

---

## 输出格式示例

```
1. 开端

李明站在青云宗的山门前，抬头望着那高耸入云的石阶。

"你就是新来的弟子？"一个声音从身后传来。

他转过身，看到一个身穿白衣的少女正打量着他。

"是的，我叫李明。"他拱手行礼。
```

---

## 字数限制

- 单章建议：1500-3000 字
- 单章上限：3000 字（超出需拆分）
- 拆分策略：在场景分隔处或段落结尾处拆分

**超出处理：**

```
检测到第 5 章超过 3000 字（实际 4200 字）

自动拆分建议：
  第 5 章（上）：2100 字（在场景分隔处拆分）
  第 5 章（下）：2100 字

是否接受拆分？
```
